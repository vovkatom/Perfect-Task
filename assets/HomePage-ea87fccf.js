import{j as e,b as S,u as v,f as se,r,h as te,o as oe,i as ne,c as W,a as A,k as ae,m as ce,n as q,p as le,L as re,q as ie,t as de,v as ue,w as me}from"./index-43806dc0.js";import{I as d,s as _e,C as he}from"./Icon-21ee8b68.js";import{c as J,a as U,u as K,I as z,P as pe,o as Q,b as H}from"./InputError-4abd9b01.js";import{a as X}from"./userBoard-selectors-dc6920e1.js";import ge from"./ScreensPage-f71840c7.js";const xe="_burgerButton_1l6xo_1",be="_burgerIcon_1l6xo_15",V={burgerButton:xe,burgerIcon:be},je=({onClick:t})=>e.jsx(e.Fragment,{children:e.jsx("button",{className:V.burgerButton,type:"button",onClick:t,children:e.jsx(d,{id:"icon-menu",className:V.burgerIcon,width:"24",height:"24"})})}),fe="_headerMainContainer_gaapz_1",Ne="_headerContainer_gaapz_26",Ce="_customBox_gaapz_51",Be="_user_gaapz_58",we="_userName_gaapz_66",Ie="_avatar_gaapz_84",ve="_avatarImg_gaapz_98",j={headerMainContainer:fe,headerContainer:Ne,customBox:Ce,user:Be,userName:we,avatar:Ie,avatarImg:ve},Se="_background_17xf8_1",ke="_modalPageBox_17xf8_15",ye="_close_17xf8_27",Pe="_editProfileTitle_17xf8_36",Te="_errorText_17xf8_124",y={background:Se,modalPageBox:ke,close:ye,editProfileTitle:Pe,errorText:Te},Le=({isOpen:t,onClose:s,title:a,children:o})=>t?e.jsx("div",{className:y.background,children:e.jsxs("div",{className:y.modalPageBox,children:[e.jsx("span",{className:y.close,onClick:s,children:"Ã—"}),e.jsx("h2",{className:y.editProfileTitle,children:a}),e.jsx("div",{className:y.content,children:o})]})}):null,$e="_inputClassName_1l4tr_2",Me="_plusIcon_1l4tr_25",Oe="_buttonSend_1l4tr_32",Ee="_authControl_1l4tr_138",Ue="_profileForm_1l4tr_143",qe="_avatar_1l4tr_150",Fe="_buttonIconProfile_1l4tr_159",ze="_buttonPlusProfile_1l4tr_172",x={inputClassName:$e,plusIcon:Me,buttonSend:Oe,authControl:Ee,profileForm:Ue,avatar:qe,buttonIconProfile:Fe,buttonPlusProfile:ze},He=J().shape({email:U().email().required(),password:U().required(),name:U().required()}),Re=({user:t,onCloseModal:s})=>{var f,N,C;const a=S();v(se);const[o,l]=r.useState(null),{register:c,handleSubmit:n,formState:{errors:i}}=K({defaultValues:t,resolver:Q(He)}),m=_=>{const u=_.target.files[0];l(u)},h=async _=>{const u=new FormData;u.append("avatarURL",o),u.append("name",_.name),u.append("email",_.email),u.append("password",_.password),a(te(u)),s()};return e.jsxs("form",{className:x.profileForm,onSubmit:n(h),children:[e.jsxs("div",{className:x.avatar,children:[e.jsx("img",{src:o?URL.createObjectURL(o):t&&t.avatarURL,alt:"avatar"}),e.jsxs("div",{className:x.buttonIconProfile,children:[e.jsx("label",{htmlFor:"avatarInput",children:e.jsx("svg",{width:"24",height:"24",className:x.plusIcon,children:e.jsx("use",{xlinkHref:`${_e}#icon-plus`})})}),e.jsx("input",{id:"avatarInput",type:"file",accept:"image/*",onChange:m,style:{display:"none"}})]})]}),e.jsx("input",{className:x.inputClassName,...c("name")}),e.jsx(z,{message:(f=i.name)==null?void 0:f.message}),e.jsx("input",{className:x.inputClassName,...c("email")}),e.jsx(z,{message:(N=i.email)==null?void 0:N.message}),e.jsx(pe,{className:x.inputClassName,register:c,placeholder:"Current password"}),e.jsx(z,{message:(C=i.password)==null?void 0:C.message}),e.jsx("button",{className:x.buttonSend,type:"submit",children:"Send"})]})},De="_background_1khuw_1",Ae="_popUpBox_1khuw_17",Ve="_themeList_1khuw_38",Ye="_popUpBtn_1khuw_44",L={background:De,popUpBox:Ae,themeList:Ve,popUpBtn:Ye},Ge="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let We=(t=21)=>{let s="",a=crypto.getRandomValues(new Uint8Array(t));for(;t--;)s+=Ge[a[t]&63];return s};const Je=({children:t,onClick:s,listClassName:a,itemClassName:o})=>e.jsx("div",{className:L.background,children:e.jsx("div",{className:L.popUpBox,children:e.jsx("ul",{className:`${L.themeList} ${a}`,children:t==null?void 0:t.map((l,c)=>e.jsx("li",{id:We(),className:o,children:e.jsx("button",{className:L.popUpBtn,onClick:()=>s(l),children:l})},c))})})}),Ke=({onClick:t})=>(r.useEffect(()=>{oe()},[]),e.jsx(Je,{onClick:t,listClassName:"themeChangeList",itemClassName:"themeChangeItem",children:["Light","Dark","Violet"]})),Qe="_themeBtn_1njqs_1",Xe="_themeIcon_1njqs_31",Y={themeBtn:Qe,themeIcon:Xe},Ze=({onClick:t})=>e.jsx(e.Fragment,{children:e.jsxs("button",{className:Y.themeBtn,type:"button",onClick:t,children:["Theme",e.jsx(d,{id:"chevron-down",className:Y.themeIcon,width:"10",height:"7"})]})}),es=({toggleSidebar:t})=>{const s=v(ne),a=v(W),[o,l]=r.useState(!1),[c,n]=r.useState(!1),i=()=>{l(!0)},m=()=>{l(!1)},h=()=>{n(!c)};return e.jsxs("div",{className:j.headerMainContainer,children:[e.jsxs("header",{className:j.headerContainer,children:[e.jsx(je,{onClick:t}),e.jsxs("div",{className:j.customBox,children:[e.jsx(Ze,{onClick:h}),e.jsxs("div",{className:j.user,onClick:i,children:[e.jsx("p",{className:j.userName,children:s==null?void 0:s.name}),e.jsx("div",{className:j.avatar,children:a?e.jsx(A,{}):e.jsx("img",{className:j.avatarImg,src:`${s==null?void 0:s.avatarURL}`,alt:"User avatar"})})]})]})]}),c&&e.jsx(Ke,{onClick:h}),e.jsx(Le,{isOpen:o,onClose:m,title:"Edit profile",children:e.jsx(Re,{user:s,onCloseModal:m})})]})},ss="_container_1pub1_1",ts="_sidebar_1pub1_11",os="_myBoardsTitle_1pub1_39",R={container:ss,sidebar:ts,myBoardsTitle:os},ns="_logo_1u7oy_1",as="_logoIcon_1u7oy_8",cs="_logoTitle_1u7oy_22",D={logo:ns,logoIcon:as,logoTitle:cs},ls=()=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:D.logo,children:[e.jsx(d,{className:D.logoIcon,id:"icon-logo2",width:"32",height:"32"}),e.jsx("p",{className:D.logoTitle,children:"Perfect Task"})]})}),rs="_button_c0cga_1",is="_buttonTitle_c0cga_21",ds="_buttonPlus_c0cga_29",us="_iconPlus_c0cga_46",$={button:rs,buttonTitle:is,buttonPlus:ds,iconPlus:us},ms="_list_19z0b_1",_s="_bgItem_19z0b_8",hs="_image_19z0b_19",ps="_imageSelected_19z0b_26",M={list:ms,bgItem:_s,image:hs,imageSelected:ps},gs=({bgImages:t,updateBg:s})=>{const[a,o]=r.useState(null),l=n=>{o(n),console.log(n),s(n)},c=Object.entries(t).map(([n,i])=>e.jsx("li",{className:M.bgItem,onClick:()=>l(n),children:e.jsx("img",{className:a===n?M.imageSelected:M.image,src:i,alt:i})},n));return e.jsx("ul",{className:M.list,children:c})},xs="_buttonCreate_eah0a_1",bs="_buttonPlus_eah0a_29",js="_iconPlus_eah0a_39",fs="_icon_eah0a_22",Ns="_textButton_eah0a_53",O={buttonCreate:xs,buttonPlus:bs,iconPlus:js,icon:fs,textButton:Ns},Cs=()=>e.jsxs("button",{type:"submit",className:O.buttonCreate,children:[e.jsx("div",{className:O.buttonPlus,children:e.jsx(d,{id:"icon-plus",className:O.iconPlus,width:"14",height:"14"})}),e.jsx("p",{className:O.textButton,children:"Create"})]}),Bs="_iconSet_1yolm_1",ws="_icon_1yolm_1",Is="_iconSelected_1yolm_26",E={iconSet:Bs,icon:ws,iconSelected:Is},vs=({updateIcon:t})=>{const[s,a]=r.useState(null),o=n=>{a(n),console.log(s),t(s)},c=["icon-Project","icon-star-04","icon-loading-03","icon-puzzle-piece-02","icon-container","icon-lightning-02","icon-colors","icon-hexagon-01"].map(n=>e.jsx("li",{className:E.iconContainer,onClick:()=>o(n),children:e.jsx(d,{className:s===n?E.iconSelected:E.icon,id:n,width:"18",height:"18"})},n));return e.jsx(e.Fragment,{children:e.jsx("ul",{className:E.iconSet,children:c})})},Ss="_form_1qku4_1",ks="_input_1qku4_6",ys="_categoryName_1qku4_31",P={form:Ss,input:ks,categoryName:ys},Ps=async()=>{const{data:t}=await ae.get("/boards/bgall");return console.log(t),t},Ts=J().shape({title:U().required()}),Ls=({closeModal:t})=>{const[s,a]=r.useState([]),[o,l]=r.useState(!1),[c,n]=r.useState(null),[i,m]=r.useState(null),[h,f]=r.useState(null),N=S(),{register:C,handleSubmit:_}=K({resolver:Q(Ts)}),u=p=>{m(p)},k=p=>{f(p)},B=async p=>{const g={title:p.title,icon:h,background:i},F=await N(ce(g));if(t(),F.type==="boards/addBoard/fulfilled")return q.Notify.success("You've successfully created a board! Congrats)");if(F.error)return console.log(F.error.message),q.Notify.failure("Something went wrong. Please try again.")};return r.useEffect(()=>{(async()=>{try{l(!0);const g=await Ps();console.log(g),a(g)}catch(g){n(g.message)}finally{l(!1)}})()},[]),e.jsxs("form",{noValidate:!0,autoComplete:"off",onSubmit:_(B),className:P.form,children:[e.jsx("input",{className:P.input,type:"text",placeholder:"Title",...C("title")}),e.jsx("p",{className:P.categoryName,children:"Icons"}),e.jsx(vs,{updateIcon:k}),e.jsx("p",{className:P.categoryName,children:"Background"}),c&&e.jsx("p",{className:P.error,children:c}),o&&e.jsx("p",{children:"...Loading"}),e.jsx(gs,{bgImages:s,updateBg:u}),e.jsx(Cs,{})]})},$s="_background_1dwji_1",Ms="_modalPageBox_1dwji_14",Os="_closeButton_1dwji_33",Es="_closeIcon_1dwji_49",Us="_errorText_1dwji_76",T={background:$s,modalPageBox:Ms,closeButton:Os,closeIcon:Es,errorText:Us},Z=({isOpen:t,onClose:s,title:a,children:o})=>{const l=r.useRef(),[c,n]=r.useState(!1);return r.useEffect(()=>{n(t)},[t]),r.useEffect(()=>{const i=m=>{l.current.contains(m.target)||s()};return c?document.addEventListener("mousedown",i):document.removeEventListener("mousedown",i),()=>{document.removeEventListener("mousedown",i)}},[c,s]),c?e.jsx("div",{className:T.background,children:e.jsxs("div",{ref:l,className:T.modalPageBox,children:[e.jsx("button",{className:T.closeButton,onClick:s,children:e.jsx(d,{id:"icon-x-close",className:T.closeIcon,width:"18",height:"18"})}),e.jsx("h2",{children:a}),e.jsx("div",{className:T.content,children:o})]})}):null},qs=()=>{const[t,s]=r.useState(!1),a=()=>{s(!0)},o=()=>{s(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:$.button,type:"button",onClick:a,children:[e.jsx("p",{className:$.buttonTitle,children:"Create a new board"}),e.jsx("div",{className:$.buttonPlus,children:e.jsx(d,{id:"icon-plus",className:$.iconPlus,width:"20",height:"20"})})]}),e.jsx(Z,{isOpen:t,onClose:o,title:"New board",children:e.jsx(Ls,{closeModal:o})})]})},Fs="_modalInput_1632w_8",zs="_modalControl_1632w_20",Hs="_modalControlText_1632w_27",Rs="_modalButton_1632w_34",w={modalInput:Fs,modalControl:zs,modalControlText:Hs,modalButton:Rs},G={email:"",message:""},Ds=({closeModal:t})=>{const[s,a]=r.useState({...G}),o=S(),l=v(W),c=k=>{const{name:B,value:p}=k.target;a(g=>({...g,[B]:p}))},n=async k=>{k.preventDefault();const B=await o(le(s));B.type==="user/support/fulfilled"&&q.Notify.success("You've successfully sent your message to our support. You will get the answer on your email during 48 hours"),B.error&&q.Notify.failure("Oops, something went wrong. Try again, please"),i(),t()},i=()=>{a({...G})},m=r.useId(),h=r.useId(),{email:f,message:N}=s,C=H(w.modalInput,w.modalControl),_=H(w.modalInput,w.modalControlText),u=H(w.modalButton,w.modalControl);return e.jsx("div",{children:e.jsxs("form",{onSubmit:n,children:[e.jsx("div",{children:e.jsx("input",{className:C,type:"email",id:m,name:"email",value:f,onChange:c,placeholder:"Email address",required:!0})}),e.jsx("div",{children:e.jsx("textarea",{className:_,id:h,name:"message",value:N,onChange:c,rows:"4",placeholder:"Comment",required:!0})}),e.jsx("button",{className:u,type:"submit",children:l?e.jsx(A,{}):"Send"})]})})},As="_container_79wtw_1",Vs="_image_79wtw_15",Ys="_infoText_79wtw_23",Gs="_perfectTask_79wtw_32",Ws="_question_79wtw_36",Js="_needHelpLink_79wtw_43",Ks="_iconHelp_79wtw_53",I={container:As,image:Vs,infoText:Ys,perfectTask:Gs,question:Ws,needHelpLink:Js,iconHelp:Ks},Qs=()=>{const[t,s]=r.useState(!1),a=()=>{s(!0)},o=()=>{s(!1)};return e.jsxs("div",{className:I.container,children:[e.jsx("svg",{className:I.image}),e.jsxs("p",{className:I.infoText,children:["If you need help with"," ",e.jsx("span",{className:I.perfectTask,children:"Perfect Task"}),", check out our support resources or reach out to our customer support team."]}),e.jsxs(re,{className:I.needHelpLink,onClick:a,children:[e.jsx(d,{id:"icon-help-circle",className:I.iconHelp,width:"20",height:"20"}),"Need help?"]}),e.jsx(Z,{isOpen:t,onClose:o,title:"Need help",children:e.jsx(Ds,{closeModal:o})})]})},Xs="_btn_logout_18dqq_1",Zs={btn_logout:Xs},et=()=>{const t=S(),s=()=>t(ie());return e.jsx("div",{children:e.jsxs("button",{className:Zs.btn_logout,onClick:s,type:"button",children:[e.jsx(d,{id:"logout",width:"32",height:"32",className:""}),"Log Out"]})})},st="_boardContainer_17uzn_1",tt="_box1_17uzn_18",ot="_box2_17uzn_23",nt="_icon_17uzn_27",at="_ScrollBoardList_17uzn_41",b={boardContainer:st,box1:tt,box2:ot,icon:nt,ScrollBoardList:at},ct=()=>{const t=v(X),s=S(),a=l=>{s(ue(l))},o=t.map(({title:l,icon:c,_id:n})=>{const i={id:n,title:l};return e.jsxs("li",{className:b.boardContainer,onClick:()=>a(i),children:[e.jsxs("a",{className:b.box1,to:`home/${n}`,children:[e.jsx(d,{className:b.icon,id:c,width:"18",height:"18"}),e.jsx("p",{children:l})]}),e.jsxs("div",{children:[e.jsx("button",{type:"button",className:b.updateButton,children:e.jsx(d,{className:b.icon,id:"icon-pencil-01",width:"16",height:"16"})}),e.jsx("button",{type:"button",className:b.deleteButton,onClick:()=>s(de(n)),children:e.jsx(d,{className:b.icon,id:"icon-trash-04",width:"16",height:"16"})})]})]},l)});return e.jsx("ul",{className:b.ScrollBoardList,children:o})},ee=r.forwardRef((t,s)=>{const a=v(X),{items:o,isLoading:l,error:c}=a,n=S();return r.useEffect(()=>{n(me())},[n]),e.jsxs("div",{ref:s,className:`${R.container} ${R.sidebar}`,children:[e.jsxs("div",{children:[e.jsx(ls,{}),e.jsx("h3",{className:R.myBoardsTitle,children:"My boards"}),e.jsx(qs,{}),c&&e.jsx("p",{children:c}),l&&e.jsx(A,{}),(o==null?void 0:o.length)===0?"":e.jsx(ct,{})]}),e.jsxs("div",{children:[e.jsx(Qs,{}),e.jsx(et,{})]})]})});ee.displayName="SideBar";const lt="_background_lg9e8_1",rt={background:lt},ht=()=>{const[t,s]=r.useState(!1),a=r.useRef(),o=()=>{s(!t)};return r.useEffect(()=>{const l=document.querySelector("body");if(console.dir(l),l.clientWidth>=1440){s(!0);return}const c=n=>{a.current.contains(n.target)||s(!1)};return document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[]),e.jsxs(e.Fragment,{children:[e.jsx(es,{toggleSidebar:o}),t&&e.jsx(ee,{ref:a}),e.jsx("div",{className:rt.background,children:e.jsx(he,{className:"home-page",children:e.jsx(ge,{})})})]})};export{ht as default};
