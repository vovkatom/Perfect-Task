import{b as z,u as B,c as b,j as e,a as w,d as A,n as h,l as E,e as I,r as k,L as N}from"./index-b585ed1f.js";import{I as d,P as M,c as f}from"./InputError-a3dbf24a.js";import{c as F,a as g,u as C,o as S}from"./index.esm-dfa17ae2.js";const L="_background_oztez_1",v="_mainBox_oztez_17",P="_authMenu_oztez_31",q="_authMenuButton_oztez_38",R="_selectedAuthMenuButton_oztez_49",$="_authControl_oztez_53",W="_authForm_oztez_66",D="_authInput_oztez_73",O="_authButton_oztez_88",s={background:L,mainBox:v,authMenu:P,authMenuButton:q,selectedAuthMenuButton:R,authControl:$,authForm:W,authInput:D,authButton:O},T=F().shape({email:g().email().required(),password:g().min(8).required(),name:g().required()}),G=({formClassName:r,inputClassName:t,buttonClassName:o})=>{var l,c,p;const u=z(),i=B(b),{register:a,handleSubmit:_,formState:{errors:n},reset:j}=C({resolver:S(T)}),y=async m=>{const x=await u(A(m));if(x.type==="auth/signup/fulfilled")return h.Notify.success("Welcome!");if(x.payload==="Email in use")return h.Notify.warning("This email is already in use. Please try using a different email address.");if(x.error)return console.log(x.payload.error.message),h.Notify.failure("Oops... Something went wrong. Please,ry again later!");j()};return e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:_(y),className:r,autoComplete:"off",children:[e.jsx("input",{className:t,...a("name"),type:"text",placeholder:"Enter your name"}),e.jsx(d,{message:(l=n.name)==null?void 0:l.message}),e.jsx("input",{className:t,type:"email",placeholder:"Enter your email",...a("email")}),e.jsx(d,{message:(c=n.email)==null?void 0:c.message}),e.jsx(M,{className:t,register:a,placeholder:"Create a password"}),e.jsx(d,{message:(p=n.password)==null?void 0:p.message}),e.jsx("button",{className:o,type:"submit",children:i?e.jsx(w,{}):"Register Now"})]})})},H=F().shape({email:g().email().required(),password:g().required()}),J=({formClassName:r,inputClassName:t,buttonClassName:o})=>{var l,c;const u=z(),i=B(b),{register:a,handleSubmit:_,formState:{errors:n},reset:j}=C({resolver:S(H)}),y=async p=>{const m=await u(E(p));m.type==="auth/login/fulfilled"&&h.Notify.success("Welcome back!"),m.error&&(console.log(m.error.message),h.Notify.failure("Invalid email, or password, or something went wrong. Please try again.")),j()};return e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:_(y),className:r,autoComplete:"off",children:[e.jsx("input",{className:t,type:"email",placeholder:"Enter your email",...a("email")}),e.jsx(d,{message:(l=n.email)==null?void 0:l.message}),e.jsx(M,{className:t,register:a,placeholder:"Enter a password"}),e.jsx(d,{message:(c=n.password)==null?void 0:c.message}),e.jsx("button",{className:o,type:"submit",children:i?e.jsx(w,{}):"Log In Now"})]})})},V=()=>{const{id:r}=I(),[t,o]=k.useState(r==="register"),u=f(s.authInput,s.authControl),i=f(s.authButton,s.authControl),a=t?G:J;return e.jsx(e.Fragment,{children:e.jsx("div",{className:s.background,children:e.jsxs("div",{className:s.mainBox,children:[e.jsxs("div",{className:s.authMenu,children:[e.jsx(N,{to:"/auth/register",children:e.jsx("button",{className:f(s.authMenuButton,t&&s.selectedAuthMenuButton),onClick:()=>{o(!0)},children:"Registration"})}),e.jsx(N,{to:"/auth/login",children:e.jsx("button",{className:f(s.authMenuButton,!t&&s.selectedAuthMenuButton),onClick:()=>{o(!1)},children:"Log In"})})]}),e.jsx(a,{inputClassName:u,buttonClassName:i,formClassName:s.authForm})]})})})};export{V as A};
