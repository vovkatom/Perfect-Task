import{j as e,b as S,u as v,f as se,r,h as te,o as oe,i as ne,c as W,a as A,k as ae,n as q,m as ce,L as le,p as re,q as ie,t as de,v as ue}from"./index-e023a573.js";import{I as d,s as me,C as _e}from"./Icon-67257ead.js";import{c as J,a as U,u as K,I as H,P as he,o as Q,b as R}from"./InputError-d4070122.js";import{r as pe,S as ge}from"./ScreensPage-604ca18b.js";import{a as X}from"./userBoard-selectors-dc6920e1.js";const xe="_burgerButton_1l6xo_1",je="_burgerIcon_1l6xo_15",V={burgerButton:xe,burgerIcon:je},be=({onClick:t})=>e.jsx(e.Fragment,{children:e.jsx("button",{className:V.burgerButton,type:"button",onClick:t,children:e.jsx(d,{id:"icon-menu",className:V.burgerIcon,width:"24",height:"24"})})}),fe="_headerMainContainer_gaapz_1",Ne="_headerContainer_gaapz_26",Ce="_customBox_gaapz_51",Be="_user_gaapz_58",we="_userName_gaapz_66",Ie="_avatar_gaapz_84",ve="_avatarImg_gaapz_98",b={headerMainContainer:fe,headerContainer:Ne,customBox:Ce,user:Be,userName:we,avatar:Ie,avatarImg:ve},Se="_background_17xf8_1",ke="_modalPageBox_17xf8_15",ye="_close_17xf8_27",Pe="_editProfileTitle_17xf8_36",Te="_errorText_17xf8_124",y={background:Se,modalPageBox:ke,close:ye,editProfileTitle:Pe,errorText:Te},Le=({isOpen:t,onClose:s,title:a,children:o})=>t?e.jsx("div",{className:y.background,children:e.jsxs("div",{className:y.modalPageBox,children:[e.jsx("span",{className:y.close,onClick:s,children:"Ã—"}),e.jsx("h2",{className:y.editProfileTitle,children:a}),e.jsx("div",{className:y.content,children:o})]})}):null,$e="_inputClassName_1l4tr_2",Me="_plusIcon_1l4tr_25",Oe="_buttonSend_1l4tr_32",Ee="_authControl_1l4tr_138",Ue="_profileForm_1l4tr_143",qe="_avatar_1l4tr_150",Fe="_buttonIconProfile_1l4tr_159",He="_buttonPlusProfile_1l4tr_172",x={inputClassName:$e,plusIcon:Me,buttonSend:Oe,authControl:Ee,profileForm:Ue,avatar:qe,buttonIconProfile:Fe,buttonPlusProfile:He},Re=J().shape({email:U().email().required(),password:U().required(),name:U().required()}),ze=({user:t,onCloseModal:s})=>{var f,N,C;const a=S();v(se);const[o,l]=r.useState(null),{register:c,handleSubmit:n,formState:{errors:i}}=K({defaultValues:t,resolver:Q(Re)}),m=_=>{const u=_.target.files[0];l(u)},h=async _=>{const u=new FormData;u.append("avatarURL",o),u.append("name",_.name),u.append("email",_.email),u.append("password",_.password),a(te(u)),s()};return e.jsxs("form",{className:x.profileForm,onSubmit:n(h),children:[e.jsxs("div",{className:x.avatar,children:[e.jsx("img",{src:o?URL.createObjectURL(o):t&&t.avatarURL,alt:"avatar"}),e.jsxs("div",{className:x.buttonIconProfile,children:[e.jsx("label",{htmlFor:"avatarInput",children:e.jsx("svg",{width:"24",height:"24",className:x.plusIcon,children:e.jsx("use",{xlinkHref:`${me}#icon-plus`})})}),e.jsx("input",{id:"avatarInput",type:"file",accept:"image/*",onChange:m,style:{display:"none"}})]})]}),e.jsx("input",{className:x.inputClassName,...c("name")}),e.jsx(H,{message:(f=i.name)==null?void 0:f.message}),e.jsx("input",{className:x.inputClassName,...c("email")}),e.jsx(H,{message:(N=i.email)==null?void 0:N.message}),e.jsx(he,{className:x.inputClassName,register:c,placeholder:"Current password"}),e.jsx(H,{message:(C=i.password)==null?void 0:C.message}),e.jsx("button",{className:x.buttonSend,type:"submit",children:"Send"})]})},De="_background_1khuw_1",Ae="_popUpBox_1khuw_17",Ve="_themeList_1khuw_38",Ye="_popUpBtn_1khuw_44",L={background:De,popUpBox:Ae,themeList:Ve,popUpBtn:Ye},Ge="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let We=(t=21)=>{let s="",a=crypto.getRandomValues(new Uint8Array(t));for(;t--;)s+=Ge[a[t]&63];return s};const Je=({children:t,onClick:s,listClassName:a,itemClassName:o})=>e.jsx("div",{className:L.background,children:e.jsx("div",{className:L.popUpBox,children:e.jsx("ul",{className:`${L.themeList} ${a}`,children:t==null?void 0:t.map((l,c)=>e.jsx("li",{id:We(),className:o,children:e.jsx("button",{className:L.popUpBtn,onClick:()=>s(l),children:l})},c))})})}),Ke=({onClick:t})=>(r.useEffect(()=>{oe()},[]),e.jsx(Je,{onClick:t,listClassName:"themeChangeList",itemClassName:"themeChangeItem",children:["Light","Dark","Violet"]})),Qe="_themeBtn_1njqs_1",Xe="_themeIcon_1njqs_31",Y={themeBtn:Qe,themeIcon:Xe},Ze=({onClick:t})=>e.jsx(e.Fragment,{children:e.jsxs("button",{className:Y.themeBtn,type:"button",onClick:t,children:["Theme",e.jsx(d,{id:"chevron-down",className:Y.themeIcon,width:"10",height:"7"})]})}),es=({toggleSidebar:t})=>{const s=v(ne),a=v(W),[o,l]=r.useState(!1),[c,n]=r.useState(!1),i=()=>{l(!0)},m=()=>{l(!1)},h=()=>{n(!c)};return e.jsxs("div",{className:b.headerMainContainer,children:[e.jsxs("header",{className:b.headerContainer,children:[e.jsx(be,{onClick:t}),e.jsxs("div",{className:b.customBox,children:[e.jsx(Ze,{onClick:h}),e.jsxs("div",{className:b.user,onClick:i,children:[e.jsx("p",{className:b.userName,children:s==null?void 0:s.name}),e.jsx("div",{className:b.avatar,children:a?e.jsx(A,{}):e.jsx("img",{className:b.avatarImg,src:`${s==null?void 0:s.avatarURL}`,alt:"User avatar"})})]})]})]}),c&&e.jsx(Ke,{onClick:h}),e.jsx(Le,{isOpen:o,onClose:m,title:"Edit profile",children:e.jsx(ze,{user:s,onCloseModal:m})})]})},ss="_container_1pub1_1",ts="_sidebar_1pub1_11",os="_myBoardsTitle_1pub1_39",z={container:ss,sidebar:ts,myBoardsTitle:os},ns="_logo_1u7oy_1",as="_logoIcon_1u7oy_8",cs="_logoTitle_1u7oy_22",D={logo:ns,logoIcon:as,logoTitle:cs},ls=()=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:D.logo,children:[e.jsx(d,{className:D.logoIcon,id:"icon-logo2",width:"32",height:"32"}),e.jsx("p",{className:D.logoTitle,children:"Perfect Task"})]})}),rs="_button_c0cga_1",is="_buttonTitle_c0cga_21",ds="_buttonPlus_c0cga_29",us="_iconPlus_c0cga_46",$={button:rs,buttonTitle:is,buttonPlus:ds,iconPlus:us},ms="_list_19z0b_1",_s="_bgItem_19z0b_8",hs="_image_19z0b_19",ps="_imageSelected_19z0b_26",M={list:ms,bgItem:_s,image:hs,imageSelected:ps},gs=({bgImages:t,updateBg:s})=>{const[a,o]=r.useState(null),l=n=>{o(n),console.log(n),s(n)},c=Object.entries(t).map(([n,i])=>e.jsx("li",{className:M.bgItem,onClick:()=>l(n),children:e.jsx("img",{className:a===n?M.imageSelected:M.image,src:i,alt:i})},n));return e.jsx("ul",{className:M.list,children:c})},xs="_buttonCreate_eah0a_1",js="_buttonPlus_eah0a_29",bs="_iconPlus_eah0a_39",fs="_icon_eah0a_22",Ns="_textButton_eah0a_53",O={buttonCreate:xs,buttonPlus:js,iconPlus:bs,icon:fs,textButton:Ns},Cs=()=>e.jsxs("button",{type:"submit",className:O.buttonCreate,children:[e.jsx("div",{className:O.buttonPlus,children:e.jsx(d,{id:"icon-plus",className:O.iconPlus,width:"14",height:"14"})}),e.jsx("p",{className:O.textButton,children:"Create"})]}),Bs="_iconSet_1yolm_1",ws="_icon_1yolm_1",Is="_iconSelected_1yolm_26",E={iconSet:Bs,icon:ws,iconSelected:Is},vs=({updateIcon:t})=>{const[s,a]=r.useState(null),o=n=>{a(n),console.log(s),t(s)},c=["icon-Project","icon-star-04","icon-loading-03","icon-puzzle-piece-02","icon-container","icon-lightning-02","icon-colors","icon-hexagon-01"].map(n=>e.jsx("li",{className:E.iconContainer,onClick:()=>o(n),children:e.jsx(d,{className:s===n?E.iconSelected:E.icon,id:n,width:"18",height:"18"})},n));return e.jsx(e.Fragment,{children:e.jsx("ul",{className:E.iconSet,children:c})})},Ss="_form_1qku4_1",ks="_input_1qku4_6",ys="_categoryName_1qku4_31",P={form:Ss,input:ks,categoryName:ys},Ps=J().shape({title:U().required()}),Ts=({closeModal:t})=>{const[s,a]=r.useState([]),[o,l]=r.useState(!1),[c,n]=r.useState(null),[i,m]=r.useState(null),[h,f]=r.useState(null),N=S(),{register:C,handleSubmit:_}=K({resolver:Q(Ps)}),u=p=>{m(p)},k=p=>{f(p)},B=async p=>{const g={title:p.title,icon:h,background:i},F=await N(ae(g));if(t(),F.type==="boards/addBoard/fulfilled")return q.Notify.success("You've successfully created a board! Congrats)");if(F.error)return console.log(F.error.message),q.Notify.failure("Something went wrong. Please try again.")};return r.useEffect(()=>{(async()=>{try{l(!0);const g=await pe();console.log(g),a(g)}catch(g){n(g.message)}finally{l(!1)}})()},[]),e.jsxs("form",{noValidate:!0,autoComplete:"off",onSubmit:_(B),className:P.form,children:[e.jsx("input",{className:P.input,type:"text",placeholder:"Title",...C("title")}),e.jsx("p",{className:P.categoryName,children:"Icons"}),e.jsx(vs,{updateIcon:k}),e.jsx("p",{className:P.categoryName,children:"Background"}),c&&e.jsx("p",{className:P.error,children:c}),o&&e.jsx("p",{children:"...Loading"}),e.jsx(gs,{bgImages:s,updateBg:u}),e.jsx(Cs,{})]})},Ls="_background_1dwji_1",$s="_modalPageBox_1dwji_14",Ms="_closeButton_1dwji_33",Os="_closeIcon_1dwji_49",Es="_errorText_1dwji_76",T={background:Ls,modalPageBox:$s,closeButton:Ms,closeIcon:Os,errorText:Es},Z=({isOpen:t,onClose:s,title:a,children:o})=>{const l=r.useRef(),[c,n]=r.useState(!1);return r.useEffect(()=>{n(t)},[t]),r.useEffect(()=>{const i=m=>{l.current.contains(m.target)||s()};return c?document.addEventListener("mousedown",i):document.removeEventListener("mousedown",i),()=>{document.removeEventListener("mousedown",i)}},[c,s]),c?e.jsx("div",{className:T.background,children:e.jsxs("div",{ref:l,className:T.modalPageBox,children:[e.jsx("button",{className:T.closeButton,onClick:s,children:e.jsx(d,{id:"icon-x-close",className:T.closeIcon,width:"18",height:"18"})}),e.jsx("h2",{children:a}),e.jsx("div",{className:T.content,children:o})]})}):null},Us=()=>{const[t,s]=r.useState(!1),a=()=>{s(!0)},o=()=>{s(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:$.button,type:"button",onClick:a,children:[e.jsx("p",{className:$.buttonTitle,children:"Create a new board"}),e.jsx("div",{className:$.buttonPlus,children:e.jsx(d,{id:"icon-plus",className:$.iconPlus,width:"20",height:"20"})})]}),e.jsx(Z,{isOpen:t,onClose:o,title:"New board",children:e.jsx(Ts,{closeModal:o})})]})},qs="_modalInput_1632w_8",Fs="_modalControl_1632w_20",Hs="_modalControlText_1632w_27",Rs="_modalButton_1632w_34",w={modalInput:qs,modalControl:Fs,modalControlText:Hs,modalButton:Rs},G={email:"",message:""},zs=({closeModal:t})=>{const[s,a]=r.useState({...G}),o=S(),l=v(W),c=k=>{const{name:B,value:p}=k.target;a(g=>({...g,[B]:p}))},n=async k=>{k.preventDefault();const B=await o(ce(s));B.type==="user/support/fulfilled"&&q.Notify.success("You've successfully sent your message to our support. You will get the answer on your email during 48 hours"),B.error&&q.Notify.failure("Oops, something went wrong. Try again, please"),i(),t()},i=()=>{a({...G})},m=r.useId(),h=r.useId(),{email:f,message:N}=s,C=R(w.modalInput,w.modalControl),_=R(w.modalInput,w.modalControlText),u=R(w.modalButton,w.modalControl);return e.jsx("div",{children:e.jsxs("form",{onSubmit:n,children:[e.jsx("div",{children:e.jsx("input",{className:C,type:"email",id:m,name:"email",value:f,onChange:c,placeholder:"Email address",required:!0})}),e.jsx("div",{children:e.jsx("textarea",{className:_,id:h,name:"message",value:N,onChange:c,rows:"4",placeholder:"Comment",required:!0})}),e.jsx("button",{className:u,type:"submit",children:l?e.jsx(A,{}):"Send"})]})})},Ds="_container_79wtw_1",As="_image_79wtw_15",Vs="_infoText_79wtw_23",Ys="_perfectTask_79wtw_32",Gs="_question_79wtw_36",Ws="_needHelpLink_79wtw_43",Js="_iconHelp_79wtw_53",I={container:Ds,image:As,infoText:Vs,perfectTask:Ys,question:Gs,needHelpLink:Ws,iconHelp:Js},Ks=()=>{const[t,s]=r.useState(!1),a=()=>{s(!0)},o=()=>{s(!1)};return e.jsxs("div",{className:I.container,children:[e.jsx("svg",{className:I.image}),e.jsxs("p",{className:I.infoText,children:["If you need help with"," ",e.jsx("span",{className:I.perfectTask,children:"Perfect Task"}),", check out our support resources or reach out to our customer support team."]}),e.jsxs(le,{className:I.needHelpLink,onClick:a,children:[e.jsx(d,{id:"icon-help-circle",className:I.iconHelp,width:"20",height:"20"}),"Need help?"]}),e.jsx(Z,{isOpen:t,onClose:o,title:"Need help",children:e.jsx(zs,{closeModal:o})})]})},Qs="_btn_logout_18dqq_1",Xs={btn_logout:Qs},Zs=()=>{const t=S(),s=()=>t(re());return e.jsx("div",{children:e.jsxs("button",{className:Xs.btn_logout,onClick:s,type:"button",children:[e.jsx(d,{id:"logout",width:"32",height:"32",className:""}),"Log Out"]})})},et="_boardContainer_1f2dp_1",st="_box1_1f2dp_22",tt="_box2_1f2dp_32",ot="_icon_1f2dp_36",nt="_ScrollBoardList_1f2dp_50",j={boardContainer:et,box1:st,box2:tt,icon:ot,ScrollBoardList:nt},at=()=>{const t=v(X),s=S(),a=l=>{s(de(l))},o=t.map(({title:l,icon:c,_id:n})=>{const i={id:n,title:l};return e.jsxs("button",{className:j.boardContainer,onClick:()=>a(i),children:[e.jsxs("a",{className:j.box1,to:`home/${n}`,children:[e.jsx(d,{className:j.icon,id:c,width:"18",height:"18"}),e.jsx("p",{children:l})]}),e.jsxs("div",{children:[e.jsx("button",{type:"button",className:j.updateButton,children:e.jsx(d,{className:j.icon,id:"icon-pencil-01",width:"16",height:"16"})}),e.jsx("button",{type:"button",className:j.deleteButton,onClick:()=>s(ie(n)),children:e.jsx(d,{className:j.icon,id:"icon-trash-04",width:"16",height:"16"})})]})]},l)});return e.jsx("ul",{className:j.ScrollBoardList,children:o})},ee=r.forwardRef((t,s)=>{const a=v(X),{items:o,isLoading:l,error:c}=a,n=S();return r.useEffect(()=>{n(ue())},[n]),e.jsxs("div",{ref:s,className:`${z.container} ${z.sidebar}`,children:[e.jsxs("div",{children:[e.jsx(ls,{}),e.jsx("h3",{className:z.myBoardsTitle,children:"My boards"}),e.jsx(Us,{}),c&&e.jsx("p",{children:c}),l&&e.jsx(A,{}),(o==null?void 0:o.length)===0?"":e.jsx(at,{})]}),e.jsxs("div",{children:[e.jsx(Ks,{}),e.jsx(Zs,{})]})]})});ee.displayName="SideBar";const ct="_background_lg9e8_1",lt={background:ct},_t=()=>{const[t,s]=r.useState(!1),a=r.useRef(),o=()=>{s(!t)};return r.useEffect(()=>{const l=document.querySelector("body");if(console.dir(l),l.clientWidth>=1440){s(!0);return}const c=n=>{a.current.contains(n.target)||s(!1)};return document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[]),e.jsxs(e.Fragment,{children:[e.jsx(es,{toggleSidebar:o}),t&&e.jsx(ee,{ref:a}),e.jsx("div",{className:lt.background,children:e.jsx(_e,{className:"home-page",children:e.jsx(ge,{})})})]})};export{_t as default};
