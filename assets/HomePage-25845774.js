import{j as e,b as v,r as l,f as V,n as T,o as Y,u as f,h as G,c as E,a as y,i as J,L as K,k as Q,m as W,p as X}from"./index-1c336ee2.js";import{C as Z}from"./Container-a6111b1c.js";import{I as i,s as ee}from"./Icon-9b723c78.js";import{c as se,a as S,u as te,o as oe}from"./index.esm-5ec95777.js";import{I as M,P as ae,c as $}from"./InputError-ef5185e2.js";import{C as A,a as ne,u as re,S as le}from"./ScreensPage-72f2aac0.js";import{a as D,s as ce}from"./userBoard-selectors-090126fb.js";const ie="_burgerButton_1l6xo_1",de="_burgerIcon_1l6xo_15",F={burgerButton:ie,burgerIcon:de},ue=({onClick:t})=>e.jsx(e.Fragment,{children:e.jsx("button",{className:F.burgerButton,type:"button",onClick:t,children:e.jsx(i,{id:"icon-menu",className:F.burgerIcon,width:"24",height:"24"})})}),me="_headerMainContainer_gaapz_1",pe="_headerContainer_gaapz_26",he="_customBox_gaapz_51",_e="_user_gaapz_58",xe="_userName_gaapz_66",ge="_avatar_gaapz_84",je="_avatarImg_gaapz_98",p={headerMainContainer:me,headerContainer:pe,customBox:he,user:_e,userName:xe,avatar:ge,avatarImg:je},be="_background_17xf8_1",fe="_modalPageBox_17xf8_15",Ne="_close_17xf8_27",Ce="_editProfileTitle_17xf8_36",ve="_errorText_17xf8_124",C={background:be,modalPageBox:fe,close:Ne,editProfileTitle:Ce,errorText:ve},Ie=({isOpen:t,onClose:s,title:a,children:o})=>t?e.jsx("div",{className:C.background,children:e.jsxs("div",{className:C.modalPageBox,children:[e.jsx("span",{className:C.close,onClick:s,children:"Ã—"}),e.jsx("h2",{className:C.editProfileTitle,children:a}),e.jsx("div",{className:C.content,children:o})]})}):null,we="_inputClassName_1l4tr_2",Be="_plusIcon_1l4tr_25",ke="_buttonSend_1l4tr_32",Pe="_authControl_1l4tr_138",Te="_profileForm_1l4tr_143",ye="_avatar_1l4tr_150",Le="_buttonIconProfile_1l4tr_159",Se="_buttonPlusProfile_1l4tr_172",d={inputClassName:we,plusIcon:Be,buttonSend:ke,authControl:Pe,profileForm:Te,avatar:ye,buttonIconProfile:Le,buttonPlusProfile:Se},Me=se().shape({email:S().email().required(),password:S().required(),name:S().required()}),$e=({user:t,onCloseModal:s})=>{var I,w,B;const a=v(),[o,n]=l.useState(null),{register:r,handleSubmit:N,formState:{errors:u}}=te({defaultValues:t,resolver:oe(Me)}),_=m=>{const c=m.target.files[0];n(c)},x=async m=>{try{const c=new FormData;c.append("avatarURL",o),c.append("name",m.name),c.append("email",m.email),c.append("password",m.password),s(),await a(V(c)),T.Notify.success("Profile updated successfully")}catch{return T.Notify.failure("Server error. Please try again.")}};return e.jsxs("form",{className:d.profileForm,onSubmit:N(x),children:[e.jsxs("div",{className:d.avatar,children:[e.jsx("img",{src:o?URL.createObjectURL(o):t.avatarURL,alt:"avatar"}),e.jsxs("div",{className:d.buttonIconProfile,children:[e.jsx("label",{htmlFor:"avatarInput",children:e.jsx("svg",{width:"24",height:"24",className:d.plusIcon,children:e.jsx("use",{xlinkHref:`${ee}#icon-plus`})})}),e.jsx("input",{id:"avatarInput",type:"file",accept:"image/*",onChange:_,style:{display:"none"}})]})]}),e.jsx("input",{className:d.inputClassName,...r("name")}),e.jsx(M,{message:(I=u.name)==null?void 0:I.message}),e.jsx("input",{className:d.inputClassName,...r("email")}),e.jsx(M,{message:(w=u.email)==null?void 0:w.message}),e.jsx(ae,{className:d.inputClassName,register:r,placeholder:"Current password"}),e.jsx(M,{message:(B=u.password)==null?void 0:B.message}),e.jsx("button",{className:d.buttonSend,type:"submit",children:"Send"})]})},Oe="_background_1khuw_1",Ue="_popUpBox_1khuw_17",Fe="_themeList_1khuw_38",qe="_popUpBtn_1khuw_44",k={background:Oe,popUpBox:Ue,themeList:Fe,popUpBtn:qe},He="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Ee=(t=21)=>{let s="",a=crypto.getRandomValues(new Uint8Array(t));for(;t--;)s+=He[a[t]&63];return s};const Ae=({children:t,onClick:s,listClassName:a,itemClassName:o})=>e.jsx("div",{className:k.background,children:e.jsx("div",{className:k.popUpBox,children:e.jsx("ul",{className:`${k.themeList} ${a}`,children:t==null?void 0:t.map((n,r)=>e.jsx("li",{id:Ee(),className:o,children:e.jsx("button",{className:k.popUpBtn,onClick:()=>s(n),children:n})},r))})})}),De=({onClick:t})=>(l.useEffect(()=>{Y()},[]),e.jsx(Ae,{onClick:t,listClassName:"themeChangeList",itemClassName:"themeChangeItem",children:["Light","Dark","Violet"]})),Re="_themeBtn_1njqs_1",ze="_themeIcon_1njqs_31",q={themeBtn:Re,themeIcon:ze},Ve=({onClick:t})=>e.jsx(e.Fragment,{children:e.jsxs("button",{className:q.themeBtn,type:"button",onClick:t,children:["Theme",e.jsx(i,{id:"chevron-down",className:q.themeIcon,width:"10",height:"7"})]})}),Ye=({toggleSidebar:t})=>{const s=f(G),a=f(E),[o,n]=l.useState(!1),[r,N]=l.useState(!1),u=()=>{n(!0)},_=()=>{n(!1)},x=()=>{N(!r)};return e.jsxs("div",{className:p.headerMainContainer,children:[e.jsxs("header",{className:p.headerContainer,children:[e.jsx(ue,{onClick:t}),e.jsxs("div",{className:p.customBox,children:[e.jsx(Ve,{onClick:x}),e.jsxs("div",{className:p.user,onClick:u,children:[e.jsx("p",{className:p.userName,children:s==null?void 0:s.name}),e.jsx("div",{className:p.avatar,children:a?e.jsx(y,{}):e.jsx("img",{className:p.avatarImg,src:`${s==null?void 0:s.avatarURL}`,alt:"User avatar"})})]})]})]}),r&&e.jsx(De,{onClick:x}),e.jsx(Ie,{isOpen:o,onClose:_,title:"Edit profile",children:e.jsx($e,{user:s,onCloseModal:_})})]})},Ge="_container_7l0up_1",Je="_sidebar_7l0up_11",Ke="_myBoardsTitle_7l0up_30",O={container:Ge,sidebar:Je,myBoardsTitle:Ke},Qe="_logo_1u7oy_1",We="_logoIcon_1u7oy_8",Xe="_logoTitle_1u7oy_22",U={logo:Qe,logoIcon:We,logoTitle:Xe},Ze=()=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:U.logo,children:[e.jsx(i,{className:U.logoIcon,id:"icon-logo2",width:"32",height:"32"}),e.jsx("p",{className:U.logoTitle,children:"Perfect Task"})]})}),es="_button_rp9xq_1",ss="_buttonTitle_rp9xq_21",ts="_buttonPlus_rp9xq_29",os="_iconPlus_rp9xq_39",P={button:es,buttonTitle:ss,buttonPlus:ts,iconPlus:os},as=()=>{const[t,s]=l.useState(!1),a=()=>{s(!0)},o=()=>{s(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:P.button,type:"button",onClick:a,children:[e.jsx("p",{className:P.buttonTitle,children:"Create a new board"}),e.jsx("div",{className:P.buttonPlus,children:e.jsx(i,{id:"icon-plus",className:P.iconPlus,width:"20",height:"20"})})]}),e.jsx(A,{isOpen:t,onClose:o,title:"New board",children:e.jsx(ne,{closeModal:o})})]})},ns="_modalInput_9fd9x_8",rs="_modalControl_9fd9x_20",ls="_modalControlText_9fd9x_27",cs="_modalButton_9fd9x_34",j={modalInput:ns,modalControl:rs,modalControlText:ls,modalButton:cs},H={email:"",message:""},is=({closeModal:t})=>{const[s,a]=l.useState({...H}),o=v(),n=f(E),r=L=>{const{name:g,value:R}=L.target;a(z=>({...z,[g]:R}))},N=L=>{L.preventDefault();try{const g=o(J(s));if(console.log(g),g.email===s.email)return T.Notify.success("You've successfully sent your message to our support. You will get the answer on your email during 48 hours");u()}catch(g){return console.log(g.response.data.message),T.Notify.failure("Ooops, something went wrong. Try again, please")}t()},u=()=>{a({...H})},_=l.useId(),x=l.useId(),{email:I,message:w}=s,B=$(j.modalInput,j.modalControl),m=$(j.modalInput,j.modalControlText),c=$(j.modalButton,j.modalControl);return e.jsx("div",{children:e.jsxs("form",{onSubmit:N,children:[e.jsx("div",{children:e.jsx("input",{className:B,type:"email",id:_,name:"email",value:I,onChange:r,placeholder:"Email address",required:!0})}),e.jsx("div",{children:e.jsx("textarea",{className:m,id:x,name:"message",value:w,onChange:r,rows:"4",placeholder:"Comment",required:!0})}),e.jsx("button",{className:c,type:"submit",children:n?e.jsx(y,{}):"Send"})]})})},ds="_container_79wtw_1",us="_image_79wtw_15",ms="_infoText_79wtw_23",ps="_perfectTask_79wtw_32",hs="_question_79wtw_36",_s="_needHelpLink_79wtw_43",xs="_iconHelp_79wtw_53",b={container:ds,image:us,infoText:ms,perfectTask:ps,question:hs,needHelpLink:_s,iconHelp:xs},gs=()=>{const[t,s]=l.useState(!1),a=()=>{s(!0)},o=()=>{s(!1)};return e.jsxs("div",{className:b.container,children:[e.jsx("svg",{className:b.image}),e.jsxs("p",{className:b.infoText,children:["If you need help with"," ",e.jsx("span",{className:b.perfectTask,children:"Perfect Task"}),", check out our support resources or reach out to our customer support team."]}),e.jsxs(K,{className:b.needHelpLink,onClick:a,children:[e.jsx(i,{id:"icon-help-circle",className:b.iconHelp,width:"20",height:"20"}),"Need help?"]}),e.jsx(A,{isOpen:t,onClose:o,title:"Need help",children:e.jsx(is,{closeModal:o})})]})},js="_btn_logout_18dqq_1",bs={btn_logout:js},fs=()=>{const t=v(),s=()=>t(Q());return e.jsx("div",{children:e.jsxs("button",{className:bs.btn_logout,onClick:s,type:"button",children:[e.jsx(i,{id:"logout",width:"32",height:"32",className:""}),"Log Out"]})})},Ns="_boardContainer_1078t_1",Cs="_box1_1078t_9",vs="_box2_1078t_14",Is="_icon_1078t_18",h={boardContainer:Ns,box1:Cs,box2:vs,icon:Is},ws=()=>{const s=f(D).map(({title:o,icon:n,id:r})=>e.jsxs("li",{className:h.boardContainer,children:[e.jsxs("div",{className:h.box1,children:[e.jsx(i,{className:h.icon,id:n,width:"18",height:"18"}),e.jsx("p",{children:o})]}),e.jsxs("div",{children:[e.jsx("button",{type:"button",className:h.updateButton,onClick:()=>a(re(r)),children:e.jsx(i,{className:h.icon,id:"icon-pencil-01",width:"16",height:"16"})}),e.jsx("button",{type:"button",className:h.deleteButton,onClick:()=>a(W(r)),children:e.jsx(i,{className:h.icon,id:"icon-trash-04",width:"16",height:"16"})})]})]},o)),a=v();return e.jsx("ul",{children:s})},Bs=()=>{const t=f(D),{items:s,isLoading:a,error:o}=t,n=v();return l.useEffect(()=>{n(X())},[n]),e.jsxs("div",{className:`${O.container} ${O.sidebar}`,children:[e.jsx(Ze,{}),e.jsx("h3",{className:O.myBoardsTitle,children:"My boards"}),e.jsx(as,{}),o&&e.jsx("p",{children:o}),a&&e.jsx(y,{}),(s==null?void 0:s.length)===0?"":e.jsx(ws,{}),e.jsx(gs,{}),e.jsx(fs,{})]})},ks="_background_lg9e8_1",Ps={background:ks},Us=()=>{const t=f(ce),[s,a]=l.useState(!1),o=()=>{a(!s)};return e.jsxs(e.Fragment,{children:[t&&e.jsx(y,{}),e.jsx(Ye,{toggleSidebar:o}),e.jsxs("div",{className:Ps.background,children:[s&&e.jsx(Bs,{}),e.jsx(Z,{className:"home-page",children:e.jsx(le,{})})]})]})};export{Us as default};
