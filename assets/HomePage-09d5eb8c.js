import{j as e,b as C,r as l,f as V,n as k,o as Y,u as N,g as G,s as E,a as y,h as J,L as K,i as Q,k as W,m as X,p as Z}from"./index-cfa98d24.js";import{C as ee}from"./Container-4e34b5c6.js";import{I as d,s as se}from"./Icon-ca42e9dd.js";import{c as te,a as S,u as oe,o as ae}from"./index.esm-dc046d22.js";import{I as M,P as ne,c as $}from"./InputError-a6597e23.js";import{C as A,a as re,u as le,S as ce}from"./ScreensPage-6f5dec1c.js";import{a as R,s as ie}from"./userBoard-selectors-090126fb.js";const de="_burgerButton_1l6xo_1",ue="_burgerIcon_1l6xo_15",F={burgerButton:de,burgerIcon:ue},me=({onClick:t})=>e.jsx(e.Fragment,{children:e.jsx("button",{className:F.burgerButton,type:"button",onClick:t,children:e.jsx(d,{id:"icon-menu",className:F.burgerIcon,width:"24",height:"24"})})}),pe="_headerMainContainer_gaapz_1",he="_headerContainer_gaapz_26",_e="_customBox_gaapz_51",xe="_user_gaapz_58",ge="_userName_gaapz_66",je="_avatar_gaapz_84",be="_avatarImg_gaapz_98",h={headerMainContainer:pe,headerContainer:he,customBox:_e,user:xe,userName:ge,avatar:je,avatarImg:be},fe="_background_17xf8_1",Ne="_modalPageBox_17xf8_15",Ce="_close_17xf8_27",ve="_editProfileTitle_17xf8_36",Ie="_errorText_17xf8_124",v={background:fe,modalPageBox:Ne,close:Ce,editProfileTitle:ve,errorText:Ie},we=({isOpen:t,onClose:s,title:a,children:o})=>t?e.jsx("div",{className:v.background,children:e.jsxs("div",{className:v.modalPageBox,children:[e.jsx("span",{className:v.close,onClick:s,children:"Ã—"}),e.jsx("h2",{className:v.editProfileTitle,children:a}),e.jsx("div",{className:v.content,children:o})]})}):null,Be="_inputClassName_1l4tr_2",Pe="_plusIcon_1l4tr_25",Te="_buttonSend_1l4tr_32",ke="_authControl_1l4tr_138",ye="_profileForm_1l4tr_143",Le="_avatar_1l4tr_150",Se="_buttonIconProfile_1l4tr_159",Me="_buttonPlusProfile_1l4tr_172",u={inputClassName:Be,plusIcon:Pe,buttonSend:Te,authControl:ke,profileForm:ye,avatar:Le,buttonIconProfile:Se,buttonPlusProfile:Me},$e=te().shape({email:S().email().required(),password:S().required(),name:S().required()}),Ue=({user:t,onCloseModal:s})=>{var I,w,B;const a=C(),[o,r]=l.useState(null),{register:n,handleSubmit:m,formState:{errors:i}}=oe({defaultValues:t,resolver:ae($e)}),x=p=>{const c=p.target.files[0];r(c)},g=async p=>{try{const c=new FormData;c.append("avatarURL",o),c.append("name",p.name),c.append("email",p.email),c.append("password",p.password),s(),await a(V(c)),k.Notify.success("Profile updated successfully")}catch{return k.Notify.failure("Server error. Please try again.")}};return e.jsxs("form",{className:u.profileForm,onSubmit:m(g),children:[e.jsxs("div",{className:u.avatar,children:[e.jsx("img",{src:o?URL.createObjectURL(o):t.avatarURL,alt:"avatar"}),e.jsxs("div",{className:u.buttonIconProfile,children:[e.jsx("label",{htmlFor:"avatarInput",children:e.jsx("svg",{width:"24",height:"24",className:u.plusIcon,children:e.jsx("use",{xlinkHref:`${se}#icon-plus`})})}),e.jsx("input",{id:"avatarInput",type:"file",accept:"image/*",onChange:x,style:{display:"none"}})]})]}),e.jsx("input",{className:u.inputClassName,...n("name")}),e.jsx(M,{message:(I=i.name)==null?void 0:I.message}),e.jsx("input",{className:u.inputClassName,...n("email")}),e.jsx(M,{message:(w=i.email)==null?void 0:w.message}),e.jsx(ne,{className:u.inputClassName,register:n,placeholder:"Current password"}),e.jsx(M,{message:(B=i.password)==null?void 0:B.message}),e.jsx("button",{className:u.buttonSend,type:"submit",children:"Send"})]})},Oe="_background_m8621_1",Fe="_popUpBox_m8621_17",qe="_themeList_m8621_38",He="_popUpBtn_m8621_44",P={background:Oe,popUpBox:Fe,themeList:qe,popUpBtn:He},Ee="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Ae=(t=21)=>{let s="",a=crypto.getRandomValues(new Uint8Array(t));for(;t--;)s+=Ee[a[t]&63];return s};const Re=({children:t,onClick:s,listClassName:a,itemClassName:o})=>e.jsx("div",{className:P.background,children:e.jsx("div",{className:P.popUpBox,children:e.jsx("ul",{className:`${P.themeList} ${a} `,children:t==null?void 0:t.map((r,n)=>e.jsx("li",{id:Ae(),className:o,children:e.jsx("button",{className:P.popUpBtn,onClick:()=>s(r),children:r})},n))})})}),De=({onClick:t})=>(l.useEffect(()=>{Y()},[]),e.jsx(Re,{onClick:t,listClassName:"themeChangeList",itemClassName:"themeChangeItem",children:["Light","Dark","Violet"]})),ze="_themeBtn_1njqs_1",Ve="_themeIcon_1njqs_31",q={themeBtn:ze,themeIcon:Ve},Ye=({onClick:t})=>e.jsx(e.Fragment,{children:e.jsxs("button",{className:q.themeBtn,type:"button",onClick:t,children:["Theme",e.jsx(d,{id:"chevron-down",className:q.themeIcon,width:"10",height:"7"})]})}),Ge=({toggleSidebar:t})=>{const s=N(G),a=N(E),[o,r]=l.useState(!1),[n,m]=l.useState(!1),i=()=>{r(!0)},x=()=>{r(!1)},g=()=>{m(!n)};return e.jsxs("div",{className:h.headerMainContainer,children:[e.jsxs("header",{className:h.headerContainer,children:[e.jsx(me,{onClick:t}),e.jsxs("div",{className:h.customBox,children:[e.jsx(Ye,{onClick:g}),e.jsxs("div",{className:h.user,onClick:i,children:[e.jsx("p",{className:h.userName,children:s==null?void 0:s.name}),e.jsx("div",{className:h.avatar,children:a?e.jsx(y,{}):e.jsx("img",{className:h.avatarImg,src:`${s==null?void 0:s.avatarURL}`,alt:"User avatar"})})]})]})]}),n&&e.jsx(De,{onClick:g}),e.jsxs(we,{isOpen:o,onClose:x,title:"Edit profile",children:[e.jsx(Ue,{user:s,onCloseModal:x})," "]})]})},Je="_container_7l0up_1",Ke="_sidebar_7l0up_11",Qe="_myBoardsTitle_7l0up_30",U={container:Je,sidebar:Ke,myBoardsTitle:Qe},We="_logo_1u7oy_1",Xe="_logoIcon_1u7oy_8",Ze="_logoTitle_1u7oy_22",O={logo:We,logoIcon:Xe,logoTitle:Ze},es=()=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:O.logo,children:[e.jsx(d,{className:O.logoIcon,id:"icon-logo2",width:"32",height:"32"}),e.jsx("p",{className:O.logoTitle,children:"Perfect Task"})]})}),ss="_button_rp9xq_1",ts="_buttonTitle_rp9xq_21",os="_buttonPlus_rp9xq_29",as="_iconPlus_rp9xq_39",T={button:ss,buttonTitle:ts,buttonPlus:os,iconPlus:as},ns=()=>{const[t,s]=l.useState(!1),a=()=>{s(!0)},o=()=>{s(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:T.button,type:"button",onClick:a,children:[e.jsx("p",{className:T.buttonTitle,children:"Create a new board"}),e.jsx("div",{className:T.buttonPlus,children:e.jsx(d,{id:"icon-plus",className:T.iconPlus,width:"20",height:"20"})})]}),e.jsx(A,{isOpen:t,onClose:o,children:e.jsx(re,{closeModal:o})})]})},rs="_modalInput_9fd9x_8",ls="_modalControl_9fd9x_20",cs="_modalControlText_9fd9x_27",is="_modalButton_9fd9x_34",b={modalInput:rs,modalControl:ls,modalControlText:cs,modalButton:is},H={email:"",message:""},ds=({closeModal:t})=>{const[s,a]=l.useState({...H}),o=C(),r=N(E),n=L=>{const{name:j,value:D}=L.target;a(z=>({...z,[j]:D}))},m=L=>{L.preventDefault();try{const j=o(J(s));if(console.log(j),j.email===s.email)return k.Notify.success("You've successfully sent your message to our support. You will get the answer on your email during 48 hours");i()}catch(j){return console.log(j.response.data.message),k.Notify.failure("Ooops, something went wrong. Try again, please")}t()},i=()=>{a({...H})},x=l.useId(),g=l.useId(),{email:I,message:w}=s,B=$(b.modalInput,b.modalControl),p=$(b.modalInput,b.modalControlText),c=$(b.modalButton,b.modalControl);return e.jsx("div",{children:e.jsxs("form",{onSubmit:m,children:[e.jsx("div",{children:e.jsx("input",{className:B,type:"email",id:x,name:"email",value:I,onChange:n,placeholder:"Email address",required:!0})}),e.jsx("div",{children:e.jsx("textarea",{className:p,id:g,name:"message",value:w,onChange:n,rows:"4",placeholder:"Comment",required:!0})}),e.jsx("button",{className:c,type:"submit",children:r?e.jsx(y,{}):"Send"})]})})},us="_container_79wtw_1",ms="_image_79wtw_15",ps="_infoText_79wtw_23",hs="_perfectTask_79wtw_32",_s="_question_79wtw_36",xs="_needHelpLink_79wtw_43",gs="_iconHelp_79wtw_53",f={container:us,image:ms,infoText:ps,perfectTask:hs,question:_s,needHelpLink:xs,iconHelp:gs},js=()=>{const[t,s]=l.useState(!1),a=()=>{s(!0)},o=()=>{s(!1)};return e.jsxs("div",{className:f.container,children:[e.jsx("svg",{className:f.image}),e.jsxs("p",{className:f.infoText,children:["If you need help with"," ",e.jsx("span",{className:f.perfectTask,children:"Perfect Task"}),", check out our support resources or reach out to our customer support team."]}),e.jsxs(K,{className:f.needHelpLink,onClick:a,children:[e.jsx(d,{id:"icon-help-circle",className:f.iconHelp,width:"20",height:"20"}),"Need help?"]}),e.jsx(A,{isOpen:t,onClose:o,title:"Need help",children:e.jsx(ds,{closeModal:o})})]})},bs="_btn_logout_18dqq_1",fs={btn_logout:bs},Ns=()=>{const t=C(),s=()=>t(Q());return e.jsx("div",{children:e.jsxs("button",{className:fs.btn_logout,onClick:s,type:"button",children:[e.jsx(d,{id:"logout",width:"32",height:"32",className:""}),"Log Out"]})})},Cs="_boardContainer_1078t_1",vs="_box1_1078t_9",Is="_box2_1078t_14",ws="_icon_1078t_18",_={boardContainer:Cs,box1:vs,box2:Is,icon:ws},Bs=()=>{const s=N(R).map(({title:o,icon:r,id:n})=>e.jsxs("li",{className:_.boardContainer,children:[e.jsxs("div",{className:_.box1,children:[e.jsx(d,{className:_.icon,id:r,width:"18",height:"18"}),e.jsx("p",{children:o})]}),e.jsxs("div",{children:[e.jsx("button",{type:"button",className:_.updateButton,onClick:()=>a(le(n)),children:e.jsx(d,{className:_.icon,id:"icon-pencil-01",width:"16",height:"16"})}),e.jsx("button",{type:"button",className:_.deleteButton,onClick:()=>a(W(n)),children:e.jsx(d,{className:_.icon,id:"icon-trash-04",width:"16",height:"16"})})]})]},o)),a=C();return e.jsx("ul",{children:s})},Ps=()=>{const t=N(R),{items:s,isLoading:a,error:o}=t,r=C();return l.useEffect(()=>{r(X())},[r]),e.jsxs("div",{className:`${U.container} ${U.sidebar}`,children:[e.jsx(es,{}),e.jsx("h3",{className:U.myBoardsTitle,children:"My boards"}),e.jsx(ns,{}),o&&e.jsx("p",{children:o}),a&&e.jsx(y,{}),(s==null?void 0:s.length)===0?"":e.jsx(Bs,{}),e.jsx(js,{}),e.jsx(Ns,{})]})},Ts="_background_lg9e8_1",ks={background:Ts},Fs=()=>{const t=N(ie),[s,a]=l.useState(!1),o=window.location.search,n=new URLSearchParams(o).get("token"),m=C();n&&m(Z(n));const i=()=>{a(!s)};return e.jsxs(e.Fragment,{children:[t&&e.jsx(y,{}),e.jsx(Ge,{toggleSidebar:i}),e.jsxs("div",{className:ks.background,children:[s&&e.jsx(Ps,{}),e.jsx(ee,{className:"home-page",children:e.jsx(ce,{})})]})]})};export{Fs as default};
