import{j as e,c as K,a as M,u as N,r as l,b as G,o as J,I as $,P as Q,d as W,n as L,e as S,s as X,f as Z,g as D,h as U,i as ee,L as se,l as te,k as oe,m as ae,p as ne}from"./index-6c43b4aa.js";import{C as ce}from"./Container-ffba22c6.js";import{I as i,s as re}from"./Icon-3c229352.js";import{C as R,a as le,u as ie,S as de}from"./ScreensPage-3752605f.js";const me="_burgerButton_1l6xo_1",ue="_burgerIcon_1l6xo_15",E={burgerButton:me,burgerIcon:ue},pe=({onClick:s})=>e.jsx(e.Fragment,{children:e.jsx("button",{className:E.burgerButton,type:"button",onClick:s,children:e.jsx(i,{id:"icon-menu",className:E.burgerIcon,width:"24",height:"24"})})}),he="_headerMainContainer_gaapz_1",_e="_headerContainer_gaapz_26",xe="_customBox_gaapz_51",ge="_user_gaapz_58",be="_userName_gaapz_66",je="_avatar_gaapz_84",fe="_avatarImg_gaapz_98",h={headerMainContainer:he,headerContainer:_e,customBox:xe,user:ge,userName:be,avatar:je,avatarImg:fe},Ne="_background_17xf8_1",Ce="_modalPageBox_17xf8_15",ve="_close_17xf8_27",Ie="_editProfileTitle_17xf8_36",we="_errorText_17xf8_124",C={background:Ne,modalPageBox:Ce,close:ve,editProfileTitle:Ie,errorText:we},ke=({isOpen:s,onClose:t,title:o,children:a})=>s?e.jsx("div",{className:C.background,children:e.jsxs("div",{className:C.modalPageBox,children:[e.jsx("span",{className:C.close,onClick:t,children:"Ã—"}),e.jsx("h2",{className:C.editProfileTitle,children:o}),e.jsx("div",{className:C.content,children:a})]})}):null,Be="_inputClassName_1l4tr_2",Pe="_plusIcon_1l4tr_25",ye="_buttonSend_1l4tr_32",Te="_authControl_1l4tr_138",Le="_profileForm_1l4tr_143",Se="_avatar_1l4tr_150",Me="_buttonIconProfile_1l4tr_159",$e="_buttonPlusProfile_1l4tr_172",d={inputClassName:Be,plusIcon:Pe,buttonSend:ye,authControl:Te,profileForm:Le,avatar:Se,buttonIconProfile:Me,buttonPlusProfile:$e},Ue=K().shape({email:M().email().required(),password:M().required(),name:M().required()}),Oe=({user:s,onCloseModal:t})=>{var k,B,P;const o=N(),[a,n]=l.useState(null),{register:c,handleSubmit:m,formState:{errors:u}}=G({defaultValues:s,resolver:J(Ue)}),x=p=>{const r=p.target.files[0];n(r)},g=async p=>{try{const r=new FormData;r.append("avatarURL",a),r.append("name",p.name),r.append("email",p.email),r.append("password",p.password),t(),await o(W(r)),L.Notify.success("Profile updated successfully")}catch{return L.Notify.failure("Server error. Please try again.")}};return e.jsxs("form",{className:d.profileForm,onSubmit:m(g),children:[e.jsxs("div",{className:d.avatar,children:[e.jsx("img",{src:a?URL.createObjectURL(a):s.avatarURL,alt:"avatar"}),e.jsxs("div",{className:d.buttonIconProfile,children:[e.jsx("label",{htmlFor:"avatarInput",children:e.jsx("svg",{width:"24",height:"24",className:d.plusIcon,children:e.jsx("use",{xlinkHref:`${re}#icon-plus`})})}),e.jsx("input",{id:"avatarInput",type:"file",accept:"image/*",onChange:x,style:{display:"none"}})]})]}),e.jsx("input",{className:d.inputClassName,...c("name")}),e.jsx($,{message:(k=u.name)==null?void 0:k.message}),e.jsx("input",{className:d.inputClassName,...c("email")}),e.jsx($,{message:(B=u.email)==null?void 0:B.message}),e.jsx(Q,{className:d.inputClassName,register:c,placeholder:"Current password"}),e.jsx($,{message:(P=u.password)==null?void 0:P.message}),e.jsx("button",{className:d.buttonSend,type:"submit",children:"Send"})]})},qe="_background_m8621_1",Fe="_popUpBox_m8621_17",Ee="_themeList_m8621_38",He="_popUpBtn_m8621_44",y={background:qe,popUpBox:Fe,themeList:Ee,popUpBtn:He},Ae="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let De=(s=21)=>{let t="",o=crypto.getRandomValues(new Uint8Array(s));for(;s--;)t+=Ae[o[s]&63];return t};const Re=({children:s,onClick:t,listClassName:o,itemClassName:a})=>e.jsx("div",{className:y.background,children:e.jsx("div",{className:y.popUpBox,children:e.jsx("ul",{className:`${y.themeList} ${o} `,children:s==null?void 0:s.map((n,c)=>e.jsx("li",{id:De(),className:a,children:e.jsx("button",{className:y.popUpBtn,onClick:()=>t(n),children:n})},c))})})}),O="theme",v="light",I="dark",w="violet",ze=()=>{const s=document.querySelector("body");document.querySelector(".themeChangeList").addEventListener("click",o=>{o.preventDefault();const{textContent:a}=o.target,n=a.trim().toLowerCase();switch(console.log(n),console.log(s),n){case v:localStorage.setItem(O,v),s.classList.add(v),s.classList.remove(I),s.classList.remove(w);break;case I:localStorage.setItem(O,I),s.classList.add(I),s.classList.remove(v),s.classList.remove(w);break;case w:localStorage.setItem(O,w),s.classList.add(w),s.classList.remove(v),s.classList.remove(I);break}})},Ve=({onClick:s})=>(l.useEffect(()=>{ze()},[]),e.jsx(Re,{onClick:s,listClassName:"themeChangeList",itemClassName:"themeChangeItem",children:["Light","Dark","Violet"]})),Ye="_themeBtn_1njqs_1",Ke="_themeIcon_1njqs_31",H={themeBtn:Ye,themeIcon:Ke},Ge=({onClick:s})=>e.jsx(e.Fragment,{children:e.jsxs("button",{className:H.themeBtn,type:"button",onClick:s,children:["Theme",e.jsx(i,{id:"chevron-down",className:H.themeIcon,width:"10",height:"7"})]})}),Je=({toggleSidebar:s})=>{const t=S(X),o=S(Z),[a,n]=l.useState(!1),[c,m]=l.useState(!1),u=()=>{n(!0)},x=()=>{n(!1)},g=()=>{m(!c)};return e.jsxs("div",{className:h.headerMainContainer,children:[e.jsxs("header",{className:h.headerContainer,children:[e.jsx(pe,{onClick:s}),e.jsxs("div",{className:h.customBox,children:[e.jsx(Ge,{onClick:g}),e.jsxs("div",{className:h.user,onClick:u,children:[e.jsx("p",{className:h.userName,children:t==null?void 0:t.name}),e.jsx("div",{className:h.avatar,children:o?e.jsx(D,{}):e.jsx("img",{className:h.avatarImg,src:`${t==null?void 0:t.avatarURL}`,alt:"User avatar"})})]})]})]}),c&&e.jsx(Ve,{onClick:g}),e.jsxs(ke,{isOpen:a,onClose:x,title:"Edit profile",children:[e.jsx(Oe,{user:t,onCloseModal:x})," "]})]})},Qe="_container_7l0up_1",We="_sidebar_7l0up_11",Xe="_myBoardsTitle_7l0up_30",q={container:Qe,sidebar:We,myBoardsTitle:Xe},Ze="_logo_1u7oy_1",es="_logoIcon_1u7oy_8",ss="_logoTitle_1u7oy_22",F={logo:Ze,logoIcon:es,logoTitle:ss},ts=()=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:F.logo,children:[e.jsx(i,{className:F.logoIcon,id:"icon-logo2",width:"32",height:"32"}),e.jsx("p",{className:F.logoTitle,children:"Perfect Task"})]})}),os="_button_rp9xq_1",as="_buttonTitle_rp9xq_21",ns="_buttonPlus_rp9xq_29",cs="_iconPlus_rp9xq_39",T={button:os,buttonTitle:as,buttonPlus:ns,iconPlus:cs},rs=()=>{const[s,t]=l.useState(!1),o=()=>{t(!0)},a=()=>{t(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:T.button,type:"button",onClick:o,children:[e.jsx("p",{className:T.buttonTitle,children:"Create a new board"}),e.jsx("div",{className:T.buttonPlus,children:e.jsx(i,{id:"icon-plus",className:T.iconPlus,width:"20",height:"20"})})]}),e.jsx(R,{isOpen:s,onClose:a,children:e.jsx(le,{closeModal:a})})]})},ls="_modalInput_9fd9x_8",is="_modalControl_9fd9x_20",ds="_modalControlText_9fd9x_27",ms="_modalButton_9fd9x_34",j={modalInput:ls,modalControl:is,modalControlText:ds,modalButton:ms},A={email:"",message:""},us=({closeModal:s})=>{const[t,o]=l.useState({...A}),a=N(),n=r=>{const{name:b,value:V}=r.target;o(Y=>({...Y,[b]:V}))},c=r=>{r.preventDefault();try{const b=a(ee(t));if(console.log(b),b.email===t.email)return L.Notify.success("You've successfully sent your message to our support. You will get the answer on your email during 48 hours");m()}catch(b){return console.log(b.response.data.message),L.Notify.failure("Ooops, something went wrong. Try again, please")}s()},m=()=>{o({...A})},u=l.useId(),x=l.useId(),{email:g,message:k}=t,B=U(j.modalInput,j.modalControl),P=U(j.modalInput,j.modalControlText),p=U(j.modalButton,j.modalControl);return e.jsx("div",{children:e.jsxs("form",{onSubmit:c,children:[e.jsx("div",{children:e.jsx("input",{className:B,type:"email",id:u,name:"email",value:g,onChange:n,placeholder:"Email address",required:!0})}),e.jsx("div",{children:e.jsx("textarea",{className:P,id:x,name:"message",value:k,onChange:n,rows:"4",placeholder:"Comment",required:!0})}),e.jsx("button",{className:p,type:"submit",children:"Send"})]})})},ps="_container_79wtw_1",hs="_image_79wtw_15",_s="_infoText_79wtw_23",xs="_perfectTask_79wtw_32",gs="_question_79wtw_36",bs="_needHelpLink_79wtw_43",js="_iconHelp_79wtw_53",f={container:ps,image:hs,infoText:_s,perfectTask:xs,question:gs,needHelpLink:bs,iconHelp:js},fs=()=>{const[s,t]=l.useState(!1),o=()=>{t(!0)},a=()=>{t(!1)};return e.jsxs("div",{className:f.container,children:[e.jsx("svg",{className:f.image}),e.jsxs("p",{className:f.infoText,children:["If you need help with"," ",e.jsx("span",{className:f.perfectTask,children:"Perfect Task"}),", check out our support resources or reach out to our customer support team."]}),e.jsxs(se,{className:f.needHelpLink,onClick:o,children:[e.jsx(i,{id:"icon-help-circle",className:f.iconHelp,width:"20",height:"20"}),"Need help?"]}),e.jsx(R,{isOpen:s,onClose:a,title:"Need help",children:e.jsx(us,{closeModal:a})})]})},Ns="_btn_logout_18dqq_1",Cs={btn_logout:Ns},vs=()=>{const s=N(),t=()=>s(te());return e.jsx("div",{children:e.jsxs("button",{className:Cs.btn_logout,onClick:t,type:"button",children:[e.jsx(i,{id:"logout",width:"32",height:"32",className:""}),"Log Out"]})})},Is="_boardContainer_1078t_1",ws="_box1_1078t_9",ks="_box2_1078t_14",Bs="_icon_1078t_18",_={boardContainer:Is,box1:ws,box2:ks,icon:Bs},z=s=>s.boards.items,Ps=()=>{const t=S(z).map(({title:a,icon:n,id:c})=>e.jsxs("li",{className:_.boardContainer,children:[e.jsxs("div",{className:_.box1,children:[e.jsx(i,{className:_.icon,id:n,width:"18",height:"18"}),e.jsx("p",{children:a})]}),e.jsxs("div",{children:[e.jsx("button",{type:"button",className:_.updateButton,onClick:()=>o(ie(c)),children:e.jsx(i,{className:_.icon,id:"icon-pencil-01",width:"16",height:"16"})}),e.jsx("button",{type:"button",className:_.deleteButton,onClick:()=>o(oe(c)),children:e.jsx(i,{className:_.icon,id:"icon-trash-04",width:"16",height:"16"})})]})]},a)),o=N();return e.jsx("ul",{children:t})},ys=()=>{const s=S(z),{items:t,isLoading:o,error:a}=s,n=N();return l.useEffect(()=>{n(ae())},[n]),e.jsxs("div",{className:`${q.container} ${q.sidebar}`,children:[e.jsx(ts,{}),e.jsx("h3",{className:q.myBoardsTitle,children:"My boards"}),e.jsx(rs,{}),a&&e.jsx("p",{children:a}),o&&e.jsx(D,{}),(t==null?void 0:t.length)===0?"":e.jsx(Ps,{}),e.jsx(fs,{}),e.jsx(vs,{})]})},Ts="_background_lg9e8_1",Ls={background:Ts},Os=()=>{const[s,t]=l.useState(!1),o=window.location.search,n=new URLSearchParams(o).get("token"),c=N();n&&c(ne(n));const m=()=>{t(!s)};return e.jsxs(e.Fragment,{children:[e.jsx(Je,{toggleSidebar:m}),e.jsxs("div",{className:Ls.background,children:[s&&e.jsx(ys,{}),e.jsx(ce,{className:"home-page",children:e.jsx(de,{})})]})]})};export{Os as default};
