import{b,u as j,s as w,j as e,a as z,c as E,n as h,l as I,d as L,r as S,L as B,e as k}from"./index-6f804815.js";import{I as d,P as M,c as f}from"./InputError-d9d6e2c6.js";import{c as F,a as g,u as A,o as C}from"./index.esm-0aea9899.js";import{s as P}from"./userBoard-selectors-090126fb.js";const v="_background_oztez_1",q="_mainBox_oztez_17",R="_authMenu_oztez_31",$="_authMenuButton_oztez_38",W="_selectedAuthMenuButton_oztez_49",D="_authControl_oztez_53",O="_authForm_oztez_66",T="_authInput_oztez_73",G="_authButton_oztez_88",t={background:v,mainBox:q,authMenu:R,authMenuButton:$,selectedAuthMenuButton:W,authControl:D,authForm:O,authInput:T,authButton:G},H=F().shape({email:g().email().required(),password:g().min(8).required(),name:g().required()}),J=({formClassName:o,inputClassName:s,buttonClassName:r})=>{var l,c,p;const u=b(),i=j(w),{register:a,handleSubmit:_,formState:{errors:n},reset:y}=A({resolver:C(H)}),N=async m=>{const x=await u(E(m));if(x.type==="auth/signup/fulfilled")return h.Notify.success("Welcome!");if(x.payload==="Email in use")return h.Notify.warning("This email is already in use. Please try using a different email address.");if(x.error)return console.log(x.payload.error.message),h.Notify.failure("Oops... Something went wrong. Please,ry again later!");y()};return e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:_(N),className:o,autoComplete:"off",children:[e.jsx("input",{className:s,...a("name"),type:"text",placeholder:"Enter your name"}),e.jsx(d,{message:(l=n.name)==null?void 0:l.message}),e.jsx("input",{className:s,type:"email",placeholder:"Enter your email",...a("email")}),e.jsx(d,{message:(c=n.email)==null?void 0:c.message}),e.jsx(M,{className:s,register:a,placeholder:"Create a password"}),e.jsx(d,{message:(p=n.password)==null?void 0:p.message}),e.jsx("button",{className:r,type:"submit",children:i?e.jsx(z,{}):"Register Now"})]})})},K=F().shape({email:g().email().required(),password:g().required()}),Q=({formClassName:o,inputClassName:s,buttonClassName:r})=>{var l,c;const u=b(),i=j(w),{register:a,handleSubmit:_,formState:{errors:n},reset:y}=A({resolver:C(K)}),N=async p=>{const m=await u(I(p));m.type==="auth/login/fulfilled"&&h.Notify.success("Welcome back!"),m.error&&(console.log(m.error.message),h.Notify.failure("Invalid email, or password, or something went wrong. Please try again.")),y()};return e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:_(N),className:o,autoComplete:"off",children:[e.jsx("input",{className:s,type:"email",placeholder:"Enter your email",...a("email")}),e.jsx(d,{message:(l=n.email)==null?void 0:l.message}),e.jsx(M,{className:s,register:a,placeholder:"Enter a password"}),e.jsx(d,{message:(c=n.password)==null?void 0:c.message}),e.jsx("button",{className:r,type:"submit",children:i?e.jsx(z,{}):"Log In Now"})]})})},U=()=>{const{id:o}=L(),[s,r]=S.useState(o==="register"),u=f(t.authInput,t.authControl),i=f(t.authButton,t.authControl),a=s?J:Q;return e.jsx(e.Fragment,{children:e.jsx("div",{className:t.background,children:e.jsxs("div",{className:t.mainBox,children:[e.jsxs("div",{className:t.authMenu,children:[e.jsx(B,{to:"/auth/register",children:e.jsx("button",{className:f(t.authMenuButton,s&&t.selectedAuthMenuButton),onClick:()=>{r(!0)},children:"Registration"})}),e.jsx(B,{to:"/auth/login",children:e.jsx("button",{className:f(t.authMenuButton,!s&&t.selectedAuthMenuButton),onClick:()=>{r(!1)},children:"Log In"})})]}),e.jsx(a,{inputClassName:u,buttonClassName:i,formClassName:t.authForm})]})})})},ee=()=>{const o=j(P),s=j(k);return e.jsxs(e.Fragment,{children:[o&&e.jsx(z,{}),e.jsx(U,{}),s&&e.jsx("p",{style:{color:"red"},children:s})]})};export{ee as default};
