import{b,u as z,c as B,j as e,a as w,d as A,n as m,l as E,e as I,r as k,L as N}from"./index-2720fdf3.js";import{c as M,a as h,u as F,o as C,I as d,P as S,b as f}from"./InputError-de733731.js";const L="_background_oztez_1",v="_mainBox_oztez_17",q="_authMenu_oztez_31",P="_authMenuButton_oztez_38",R="_selectedAuthMenuButton_oztez_49",$="_authControl_oztez_53",T="_authForm_oztez_66",W="_authInput_oztez_73",D="_authButton_oztez_88",s={background:L,mainBox:v,authMenu:q,authMenuButton:P,selectedAuthMenuButton:R,authControl:$,authForm:T,authInput:W,authButton:D},O=M().shape({email:h().email().required(),password:h().min(8).required(),name:h().required()}),G=({formClassName:r,inputClassName:t,buttonClassName:o})=>{var l,c,g;const u=b(),i=z(B),{register:a,handleSubmit:_,formState:{errors:n},reset:j}=F({resolver:C(O)}),y=async p=>{const x=await u(A(p));if(x.type==="auth/signup/fulfilled")return m.Notify.success("Welcome!");if(x.payload==="Email in use")return m.Notify.warning("This email is already in use. Please try using a different email address.");if(x.error)return console.log(x.payload.error.message),m.Notify.failure("Oops... Something went wrong. Please,ry again later!");j()};return e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:_(y),className:r,autoComplete:"off",children:[e.jsx("input",{className:t,...a("name"),type:"text",placeholder:"Enter your name"}),e.jsx(d,{message:(l=n.name)==null?void 0:l.message}),e.jsx("input",{className:t,type:"email",placeholder:"Enter your email",...a("email")}),e.jsx(d,{message:(c=n.email)==null?void 0:c.message}),e.jsx(S,{className:t,register:a,placeholder:"Create a password"}),e.jsx(d,{message:(g=n.password)==null?void 0:g.message}),e.jsx("button",{className:o,type:"submit",children:i?e.jsx(w,{}):"Register Now"})]})})},H=M().shape({email:h().email().required(),password:h().required()}),J=({formClassName:r,inputClassName:t,buttonClassName:o})=>{var l,c;const u=b(),i=z(B),{register:a,handleSubmit:_,formState:{errors:n},reset:j}=F({resolver:C(H)}),y=async g=>{const p=await u(E(g));p.type==="auth/login/fulfilled"&&m.Notify.success("Welcome back!"),p.error&&m.Notify.failure("Invalid email, or password, or something went wrong. Try again, please."),j()};return e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:_(y),className:r,autoComplete:"off",children:[e.jsx("input",{className:t,type:"email",placeholder:"Enter your email",...a("email")}),e.jsx(d,{message:(l=n.email)==null?void 0:l.message}),e.jsx(S,{className:t,register:a,placeholder:"Enter a password"}),e.jsx(d,{message:(c=n.password)==null?void 0:c.message}),e.jsx("button",{className:o,type:"submit",children:i?e.jsx(w,{}):"Log In Now"})]})})},U=()=>{const{id:r}=I(),[t,o]=k.useState(r==="register"),u=f(s.authInput,s.authControl),i=f(s.authButton,s.authControl),a=t?G:J;return e.jsx(e.Fragment,{children:e.jsx("div",{className:s.background,children:e.jsxs("div",{className:s.mainBox,children:[e.jsxs("div",{className:s.authMenu,children:[e.jsx(N,{to:"/auth/register",children:e.jsx("button",{className:f(s.authMenuButton,t&&s.selectedAuthMenuButton),onClick:()=>{o(!0)},children:"Registration"})}),e.jsx(N,{to:"/auth/login",children:e.jsx("button",{className:f(s.authMenuButton,!t&&s.selectedAuthMenuButton),onClick:()=>{o(!1)},children:"Log In"})})]}),e.jsx(a,{inputClassName:u,buttonClassName:i,formClassName:s.authForm})]})})})};export{U as A};
