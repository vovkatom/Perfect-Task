import{j as e,c as J,a as $,u as N,r as l,b as Q,o as W,I as U,P as X,d as Z,n as S,e as k,s as ee,f as z,g as H,h as O,i as se,L as te,l as oe,k as ae,m as ne,p as ce}from"./index-9bca88fa.js";import{C as le}from"./Container-3da5d42f.js";import{I as i,s as re}from"./Icon-d51f4322.js";import{C as V,a as ie,u as de,S as me}from"./ScreensPage-d668289c.js";const ue="_burgerButton_1l6xo_1",pe="_burgerIcon_1l6xo_15",A={burgerButton:ue,burgerIcon:pe},he=({onClick:s})=>e.jsx(e.Fragment,{children:e.jsx("button",{className:A.burgerButton,type:"button",onClick:s,children:e.jsx(i,{id:"icon-menu",className:A.burgerIcon,width:"24",height:"24"})})}),_e="_headerMainContainer_gaapz_1",xe="_headerContainer_gaapz_26",ge="_customBox_gaapz_51",be="_user_gaapz_58",je="_userName_gaapz_66",fe="_avatar_gaapz_84",Ne="_avatarImg_gaapz_98",h={headerMainContainer:_e,headerContainer:xe,customBox:ge,user:be,userName:je,avatar:fe,avatarImg:Ne},Ce="_background_17xf8_1",ve="_modalPageBox_17xf8_15",Ie="_close_17xf8_27",we="_editProfileTitle_17xf8_36",ke="_errorText_17xf8_124",C={background:Ce,modalPageBox:ve,close:Ie,editProfileTitle:we,errorText:ke},Be=({isOpen:s,onClose:t,title:o,children:a})=>s?e.jsx("div",{className:C.background,children:e.jsxs("div",{className:C.modalPageBox,children:[e.jsx("span",{className:C.close,onClick:t,children:"Ã—"}),e.jsx("h2",{className:C.editProfileTitle,children:o}),e.jsx("div",{className:C.content,children:a})]})}):null,Pe="_inputClassName_1l4tr_2",ye="_plusIcon_1l4tr_25",Te="_buttonSend_1l4tr_32",Le="_authControl_1l4tr_138",Se="_profileForm_1l4tr_143",Me="_avatar_1l4tr_150",$e="_buttonIconProfile_1l4tr_159",Ue="_buttonPlusProfile_1l4tr_172",d={inputClassName:Pe,plusIcon:ye,buttonSend:Te,authControl:Le,profileForm:Se,avatar:Me,buttonIconProfile:$e,buttonPlusProfile:Ue},Oe=J().shape({email:$().email().required(),password:$().required(),name:$().required()}),qe=({user:s,onCloseModal:t})=>{var B,P,y;const o=N(),[a,n]=l.useState(null),{register:c,handleSubmit:m,formState:{errors:u}}=Q({defaultValues:s,resolver:W(Oe)}),x=p=>{const r=p.target.files[0];n(r)},g=async p=>{try{const r=new FormData;r.append("avatarURL",a),r.append("name",p.name),r.append("email",p.email),r.append("password",p.password),t(),await o(Z(r)),S.Notify.success("Profile updated successfully")}catch{return S.Notify.failure("Server error. Please try again.")}};return e.jsxs("form",{className:d.profileForm,onSubmit:m(g),children:[e.jsxs("div",{className:d.avatar,children:[e.jsx("img",{src:a?URL.createObjectURL(a):s.avatarURL,alt:"avatar"}),e.jsxs("div",{className:d.buttonIconProfile,children:[e.jsx("label",{htmlFor:"avatarInput",children:e.jsx("svg",{width:"24",height:"24",className:d.plusIcon,children:e.jsx("use",{xlinkHref:`${re}#icon-plus`})})}),e.jsx("input",{id:"avatarInput",type:"file",accept:"image/*",onChange:x,style:{display:"none"}})]})]}),e.jsx("input",{className:d.inputClassName,...c("name")}),e.jsx(U,{message:(B=u.name)==null?void 0:B.message}),e.jsx("input",{className:d.inputClassName,...c("email")}),e.jsx(U,{message:(P=u.email)==null?void 0:P.message}),e.jsx(X,{className:d.inputClassName,register:c,placeholder:"Current password"}),e.jsx(U,{message:(y=u.password)==null?void 0:y.message}),e.jsx("button",{className:d.buttonSend,type:"submit",children:"Send"})]})},Fe="_background_m8621_1",Ee="_popUpBox_m8621_17",He="_themeList_m8621_38",Ae="_popUpBtn_m8621_44",T={background:Fe,popUpBox:Ee,themeList:He,popUpBtn:Ae},De="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Re=(s=21)=>{let t="",o=crypto.getRandomValues(new Uint8Array(s));for(;s--;)t+=De[o[s]&63];return t};const ze=({children:s,onClick:t,listClassName:o,itemClassName:a})=>e.jsx("div",{className:T.background,children:e.jsx("div",{className:T.popUpBox,children:e.jsx("ul",{className:`${T.themeList} ${o} `,children:s==null?void 0:s.map((n,c)=>e.jsx("li",{id:Re(),className:a,children:e.jsx("button",{className:T.popUpBtn,onClick:()=>t(n),children:n})},c))})})}),q="theme",v="light",I="dark",w="violet",Ve=()=>{const s=document.querySelector("body");document.querySelector(".themeChangeList").addEventListener("click",o=>{o.preventDefault();const{textContent:a}=o.target,n=a.trim().toLowerCase();switch(console.log(n),console.log(s),n){case v:localStorage.setItem(q,v),s.classList.add(v),s.classList.remove(I),s.classList.remove(w);break;case I:localStorage.setItem(q,I),s.classList.add(I),s.classList.remove(v),s.classList.remove(w);break;case w:localStorage.setItem(q,w),s.classList.add(w),s.classList.remove(v),s.classList.remove(I);break}})},Ye=({onClick:s})=>(l.useEffect(()=>{Ve()},[]),e.jsx(ze,{onClick:s,listClassName:"themeChangeList",itemClassName:"themeChangeItem",children:["Light","Dark","Violet"]})),Ke="_themeBtn_1njqs_1",Ge="_themeIcon_1njqs_31",D={themeBtn:Ke,themeIcon:Ge},Je=({onClick:s})=>e.jsx(e.Fragment,{children:e.jsxs("button",{className:D.themeBtn,type:"button",onClick:s,children:["Theme",e.jsx(i,{id:"chevron-down",className:D.themeIcon,width:"10",height:"7"})]})}),Qe=({toggleSidebar:s})=>{const t=k(ee),o=k(z),[a,n]=l.useState(!1),[c,m]=l.useState(!1),u=()=>{n(!0)},x=()=>{n(!1)},g=()=>{m(!c)};return e.jsxs("div",{className:h.headerMainContainer,children:[e.jsxs("header",{className:h.headerContainer,children:[e.jsx(he,{onClick:s}),e.jsxs("div",{className:h.customBox,children:[e.jsx(Je,{onClick:g}),e.jsxs("div",{className:h.user,onClick:u,children:[e.jsx("p",{className:h.userName,children:t==null?void 0:t.name}),e.jsx("div",{className:h.avatar,children:o?e.jsx(H,{}):e.jsx("img",{className:h.avatarImg,src:`${t==null?void 0:t.avatarURL}`,alt:"User avatar"})})]})]})]}),c&&e.jsx(Ye,{onClick:g}),e.jsxs(Be,{isOpen:a,onClose:x,title:"Edit profile",children:[e.jsx(qe,{user:t,onCloseModal:x})," "]})]})},We="_container_7l0up_1",Xe="_sidebar_7l0up_11",Ze="_myBoardsTitle_7l0up_30",F={container:We,sidebar:Xe,myBoardsTitle:Ze},es="_logo_1u7oy_1",ss="_logoIcon_1u7oy_8",ts="_logoTitle_1u7oy_22",E={logo:es,logoIcon:ss,logoTitle:ts},os=()=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:E.logo,children:[e.jsx(i,{className:E.logoIcon,id:"icon-logo2",width:"32",height:"32"}),e.jsx("p",{className:E.logoTitle,children:"Perfect Task"})]})}),as="_button_rp9xq_1",ns="_buttonTitle_rp9xq_21",cs="_buttonPlus_rp9xq_29",ls="_iconPlus_rp9xq_39",L={button:as,buttonTitle:ns,buttonPlus:cs,iconPlus:ls},rs=()=>{const[s,t]=l.useState(!1),o=()=>{t(!0)},a=()=>{t(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:L.button,type:"button",onClick:o,children:[e.jsx("p",{className:L.buttonTitle,children:"Create a new board"}),e.jsx("div",{className:L.buttonPlus,children:e.jsx(i,{id:"icon-plus",className:L.iconPlus,width:"20",height:"20"})})]}),e.jsx(V,{isOpen:s,onClose:a,children:e.jsx(ie,{closeModal:a})})]})},is="_modalInput_9fd9x_8",ds="_modalControl_9fd9x_20",ms="_modalControlText_9fd9x_27",us="_modalButton_9fd9x_34",j={modalInput:is,modalControl:ds,modalControlText:ms,modalButton:us},R={email:"",message:""},ps=({closeModal:s})=>{const[t,o]=l.useState({...R}),a=N(),n=k(z),c=M=>{const{name:b,value:K}=M.target;o(G=>({...G,[b]:K}))},m=M=>{M.preventDefault();try{const b=a(se(t));if(console.log(b),b.email===t.email)return S.Notify.success("You've successfully sent your message to our support. You will get the answer on your email during 48 hours");u()}catch(b){return console.log(b.response.data.message),S.Notify.failure("Ooops, something went wrong. Try again, please")}s()},u=()=>{o({...R})},x=l.useId(),g=l.useId(),{email:B,message:P}=t,y=O(j.modalInput,j.modalControl),p=O(j.modalInput,j.modalControlText),r=O(j.modalButton,j.modalControl);return e.jsx("div",{children:e.jsxs("form",{onSubmit:m,children:[e.jsx("div",{children:e.jsx("input",{className:y,type:"email",id:x,name:"email",value:B,onChange:c,placeholder:"Email address",required:!0})}),e.jsx("div",{children:e.jsx("textarea",{className:p,id:g,name:"message",value:P,onChange:c,rows:"4",placeholder:"Comment",required:!0})}),e.jsx("button",{className:r,type:"submit",children:n?e.jsx(H,{}):"Send"})]})})},hs="_container_79wtw_1",_s="_image_79wtw_15",xs="_infoText_79wtw_23",gs="_perfectTask_79wtw_32",bs="_question_79wtw_36",js="_needHelpLink_79wtw_43",fs="_iconHelp_79wtw_53",f={container:hs,image:_s,infoText:xs,perfectTask:gs,question:bs,needHelpLink:js,iconHelp:fs},Ns=()=>{const[s,t]=l.useState(!1),o=()=>{t(!0)},a=()=>{t(!1)};return e.jsxs("div",{className:f.container,children:[e.jsx("svg",{className:f.image}),e.jsxs("p",{className:f.infoText,children:["If you need help with"," ",e.jsx("span",{className:f.perfectTask,children:"Perfect Task"}),", check out our support resources or reach out to our customer support team."]}),e.jsxs(te,{className:f.needHelpLink,onClick:o,children:[e.jsx(i,{id:"icon-help-circle",className:f.iconHelp,width:"20",height:"20"}),"Need help?"]}),e.jsx(V,{isOpen:s,onClose:a,title:"Need help",children:e.jsx(ps,{closeModal:a})})]})},Cs="_btn_logout_18dqq_1",vs={btn_logout:Cs},Is=()=>{const s=N(),t=()=>s(oe());return e.jsx("div",{children:e.jsxs("button",{className:vs.btn_logout,onClick:t,type:"button",children:[e.jsx(i,{id:"logout",width:"32",height:"32",className:""}),"Log Out"]})})},ws="_boardContainer_1078t_1",ks="_box1_1078t_9",Bs="_box2_1078t_14",Ps="_icon_1078t_18",_={boardContainer:ws,box1:ks,box2:Bs,icon:Ps},Y=s=>s.boards.items,ys=()=>{const t=k(Y).map(({title:a,icon:n,id:c})=>e.jsxs("li",{className:_.boardContainer,children:[e.jsxs("div",{className:_.box1,children:[e.jsx(i,{className:_.icon,id:n,width:"18",height:"18"}),e.jsx("p",{children:a})]}),e.jsxs("div",{children:[e.jsx("button",{type:"button",className:_.updateButton,onClick:()=>o(de(c)),children:e.jsx(i,{className:_.icon,id:"icon-pencil-01",width:"16",height:"16"})}),e.jsx("button",{type:"button",className:_.deleteButton,onClick:()=>o(ae(c)),children:e.jsx(i,{className:_.icon,id:"icon-trash-04",width:"16",height:"16"})})]})]},a)),o=N();return e.jsx("ul",{children:t})},Ts=()=>{const s=k(Y),{items:t,isLoading:o,error:a}=s,n=N();return l.useEffect(()=>{n(ne())},[n]),e.jsxs("div",{className:`${F.container} ${F.sidebar}`,children:[e.jsx(os,{}),e.jsx("h3",{className:F.myBoardsTitle,children:"My boards"}),e.jsx(rs,{}),a&&e.jsx("p",{children:a}),o&&e.jsx(H,{}),(t==null?void 0:t.length)===0?"":e.jsx(ys,{}),e.jsx(Ns,{}),e.jsx(Is,{})]})},Ls="_background_lg9e8_1",Ss={background:Ls},qs=()=>{const[s,t]=l.useState(!1),o=window.location.search,n=new URLSearchParams(o).get("token"),c=N();n&&c(ce(n));const m=()=>{t(!s)};return e.jsxs(e.Fragment,{children:[e.jsx(Qe,{toggleSidebar:m}),e.jsxs("div",{className:Ss.background,children:[s&&e.jsx(Ts,{}),e.jsx(le,{className:"home-page",children:e.jsx(me,{})})]})]})};export{qs as default};
